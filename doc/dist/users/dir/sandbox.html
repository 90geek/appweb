<!DOCTYPE html><html lang="en"><head><title>Sandboxing</title><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="Sandboxing"><link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700|Open+Sans:300italic,400,300,700' rel='stylesheet' type='text/css'><link href='https://fonts.googleapis.com/css?family=Julius+Sans+One' rel='stylesheet' type='text/css'><link href="../../images/favicon.ico" rel="shortcut icon"><link href="../../lib/semantic-ui/semantic.css" rel="stylesheet" type="text/css"><link href="../../css/all.css" rel="stylesheet" type="text/css"><link href="../../css/api.css" rel="stylesheet" type="text/css"><body class="show-sidebar"><div class="sidebar"><div class="ui large left vertical inverted labeled menu"><div class="item"><a href="../../index.html" class="logo">Appweb Docs</a></div><div class="item"><div class="menu"><a class="header item" href="../../index.html">Home</a> <a class="item" href="../../users/features.html">Appweb Features</a> <a class="item" href="https://embedthis.com/appweb/download.html">Download</a> <a class="item" href="../../licensing/index.html">Licensing</a></div></div><div class="item"><div class="menu"><a class="header item" href="../../start/index.html">Getting Started</a> <a class="item" href="../../start/quick.html">Quick Start</a> <a class="item" href="../../start/installing.html">Installing Appweb</a> <a class="item" href="../../start/starting.html">Starting and Stopping</a> <a class="item" href="../../start/service.html">Running as a Service</a> <a class="item" href="../../start/releaseNotes.html">Release Notes</a> <a class="item" href="../../start/source.html">Building from Source</a></div></div><div class="item"><div class="menu"><a class="header item" href="../../users/index.html">User's Guide</a> <a class="item" href="../../users/configuration.html">Configuring Appweb</a> <a class="item" href="../../users/directives.html">Configuration Directives</a> <a class="item" href="../../users/frameworks.html">Web Frameworks</a> <a class="item" href="../../users/modules.html">Using Loadable Modules</a> <a class="item" href="../../users/ports.html">Ports and Binding</a> <a class="item" href="../../users/routing.html">Routing Requests</a> <a class="item" href="../../users/stages.html">Request Pipeline</a> <a class="item" href="../../users/lang.html">Multi-Language Content</a> <a class="item" href="../../users/authentication.html">User Authentication</a> <a class="item" href="../../users/logFiles.html">Logging</a> <a class="item" href="../../users/caching.html">Caching</a> <a class="item" href="../../users/vhosts.html">Virtual Hosts</a> <a class="item" href="../../users/ssl.html">Secure Sockets (SSL)</a> <a class="item" href="../../users/client.html">Http Client</a> <a class="item" href="../../users/security.html">Security Considerations</a> <a class="item" href="../../users/monitor.html">Monitoring and Defending</a> <a class="item" href="../../users/uploading.html">File Upload</a> <a class="item" href="../../users/webSockets.html">WebSockets</a> <a class="item" href="../../users/man.html">Man Pages</a></div></div><div class="item"><div class="menu"><a class="header item" href="../../developers/index.html">Developer's Guide</a> <a class="item" href="../../developers/embedding.html">Embedding Appweb</a> <a class="item" href="../../developers/modules.html">Creating Appweb Modules</a> <a class="item" href="../../developers/handlers.html">Creating Appweb Handlers</a> <a class="item" href="../../developers/action.html">Using the Action Handler</a> <a class="item" href="../../developers/stages.html">Creating Pipeline Stages</a> <a class="item" href="../../developers/migrating.html">Migrating to Appweb 5</a></div></div><div class="item"><div class="menu"><a class="header item" href="../../ref/index.html">Reference Guide</a> <a class="item" href="../../ref/compatibility.html">Compatibility</a> <a class="item" href="../../ref/native.html">Native APIs</a> <a class="item" href="../../ref/architecture.html">Appweb Architecture</a> <a class="item" href="../../ref/memory.html">Appweb Memory Allocation</a> <a class="item" href="../../ref/multithread.html">Multithreaded Programming</a> <a class="item" href="../../standards/http.html">HTTP References</a></div></div><div class="item"><div class="menu"><a class="header item" href="../../users/samples.html">Samples</a> <a class="item" href="https://github.com/embedthis/appweb/tree/dev/samples/chroot-server">chroot-server</a> <a class="item" href="https://github.com/embedthis/appweb/tree/dev/samples/cpp-handler">cpp-handler</a> <a class="item" href="https://github.com/embedthis/appweb/tree/dev/samples/cpp-module">cpp-module</a> <a class="item" href="https://github.com/embedthis/appweb/tree/dev/samples/deploy-server">deploy-server</a> <a class="item" href="https://github.com/embedthis/appweb/tree/dev/samples/esp-hosted">esp-hosted</a> <a class="item" href="https://github.com/embedthis/appweb/tree/dev/samples/login-basic">login-basic</a> <a class="item" href="https://github.com/embedthis/appweb/tree/dev/samples/login-form">login-form</a> <a class="item" href="https://github.com/embedthis/appweb/tree/dev/samples/max-server">max-server</a> <a class="item" href="https://github.com/embedthis/appweb/tree/dev/samples/min-server">min-server</a> <a class="item" href="https://github.com/embedthis/appweb/tree/dev/samples/secure-server">secure-server</a> <a class="item" href="https://github.com/embedthis/appweb/tree/dev/samples/simple-action">simple-action</a> <a class="item" href="https://github.com/embedthis/appweb/tree/dev/samples/simple-client">simple-client</a> <a class="item" href="https://github.com/embedthis/appweb/tree/dev/samples/simple-handler">simple-handler</a> <a class="item" href="https://github.com/embedthis/appweb/tree/dev/samples/simple-module">simple-module</a> <a class="item" href="https://github.com/embedthis/appweb/tree/dev/samples/simple-server">simple-server</a> <a class="item" href="https://github.com/embedthis/appweb/tree/dev/samples/spy-filter">spy-filter</a> <a class="item" href="https://github.com/embedthis/appweb/tree/dev/samples/ssl-server">ssl-server</a> <a class="item" href="https://github.com/embedthis/appweb/tree/dev/samples/tiny-server">tiny-server</a> <a class="item" href="https://github.com/embedthis/appweb/tree/dev/samples/typical-client">typical-client</a> <a class="item" href="https://github.com/embedthis/appweb/tree/dev/samples/typical-server">typical-server</a> <a class="item" href="https://github.com/embedthis/appweb/tree/dev/samples/websockets-chat">websockets-chat</a> <a class="item" href="https://github.com/embedthis/appweb/tree/dev/samples/websockets-echo">websockets-echo</a> <a class="item" href="https://github.com/embedthis/appweb/tree/dev/samples/websockets-output">websockets-output</a></div></div><div class="item"><div class="menu"><a class="header item" href="../../developers/project.html">Project Resources</a> <a class="item" href="http://goo.gl/dGRDl4">Official Appweb News</a> <a class="item" href="https://embedthis.com/appweb/">Appweb Web Site</a> <a class="item" href="https://github.com/embedthis/appweb">Source Code Repository</a> <a class="item" href="https://github.com/embedthis/appweb/issues/389">Appweb Security Alerts</a> <a class="item" href="https://github.com/embedthis/appweb/issues">Project Issue Database</a> <a class="item" href="https://github.com/embedthis/appweb/releases">Change Log</a> <a class="item" href="https://github.com/embedthis/appweb/milestones">Roadmap</a> <a class="item" href="https://embedthis.com/developers/contributors.html">Contributors Agreement</a></div></div><div class="item"><div class="menu"><span class="header item">Links</span> <a class="item" href="https://embedthis.com/">Embedthis Web Site</a> <a class="item" href="https://embedthis.com/blog/">Embedthis Blog</a> <a class="item" href="http://twitter.com/mobstream">Twitter</a></div></div></div></div><div class="ui inverted masthead"><div class="ui fixed inverted menu"><div class="ui sidebar-launch button"><i class="icon list layout"></i></div><div class="right menu"><a class="item" href="https://embedthis.com/">Embedthis</a> <a class="item" href="https://embedthis.com/appweb/">Appweb Site</a> <span class="desktop-only"><a class="item" href="http://goo.gl/dGRDl4">Appweb News</a> <a class="item" href="https://github.com/embedthis/appweb">Repository</a> <a class="item" href="https://embedthis.com/blog/">Blog</a> <a class="item" href="https://twitter.com/mobstream">Twitter</a></span></div></div><div class="ui breadcrumb"><a class="section" href="../../">Home</a><div class="divider">/</div><a class="section" href="../index.html">User's Guide</a><div class="divider">/</div><a class="section" href="../configuration.html">Configuration</a><div class="divider">/</div><a class="active section" href="sandbox.html">Sandboxing</a></div><iframe class="version desktop-only" src="../../version.html"></iframe></div><div class="content"><h1>Sandbox Directives</h1><p>Appweb supports directives that limit its use of system resources such as memory and threads. This technique is know as "sandboxing" because it creates a limited or safer area in which Appweb executes.</p><a id="exitTimeout"></a><h2>ExitTimeout</h2><table class="directive" title="directive"><tbody><tr><td class="pivot">Description<td>Timeout to wait when exiting or restarting<tr><td class="pivot">Synopsis<td>ExitTimeout period<tr><td class="pivot">Context<td>Default server<tr><td class="pivot">Example<td>ExitTimeout 30secs<tr><td class="pivot">Notes<td><p>This directive defines the maximum time to wait for existing requests to complete before exiting or restarting Appweb.</p></table><a id="limitBuffer"></a><h2>LimitBuffer</h2><table class="directive" title="directive"><tbody><tr><td class="pivot">Description<td>Defines the pipeline stage buffer size<tr><td class="pivot">Synopsis<td>LimitBuffer size<tr><td class="pivot">Context<td>Default server, VirtualHost<tr><td class="pivot">Example<td>LimitBuffer 8192<tr><td class="pivot">Notes<td><p>This directive defines the maximum buffer size in bytes for each stage in the request pipeline. This directive places a limit on the amount of memory consumed by pipeline stages.</p><p>NOTE: this does not imply a maximum response size (See LimitResponseBody for that functionality). It merely limits the memory consumed when trying to buffer the response data. Appweb handlers will flush the buffers and use HTTP/1.1 chunked output if the amount of response data exceeds the output buffer size.</p></table><a id="limitCache"></a><h2>LimitCache</h2><table class="directive" title="directive"><tbody><tr><td class="pivot">Description<td>Maximum size of response data and session state<tr><td class="pivot">Synopsis<td>LimitCache size<tr><td class="pivot">Context<td>Default server, VirtualHost<tr><td class="pivot">Example<td>LimitCache 8192<tr><td class="pivot">Notes<td><p>This directive defines the maximum size of the Appweb data cache. This cache store is used for caching responses and for the session state date for ESP applications. If the maximum size is exceeded, Appweb will prune the oldest data in the cache to make room for newer items.</p></table><a id="limitCacheItem"></a><h2>LimitCacheItem</h2><table class="directive" title="directive"><tbody><tr><td class="pivot">Description<td>Maximum size of a single item in the cache<tr><td class="pivot">Synopsis<td>LimitCacheItem size<tr><td class="pivot">Context<td>Default server, VirtualHost<tr><td class="pivot">Example<td>LimitCacheItem 512K<tr><td class="pivot">Notes<td><p>This directive defines the maximum size of a single item in the Appweb data cache. This cache store is used for caching responses and for the session state date for ESP applications. If the maximum size is exceeded, Appweb will not store the item in the cache. The request will continue, but not be served from the cache.</p></table><a id="limitChunk"></a><h2>LimitChunk</h2><table class="directive" title="directive"><tbody><tr><td class="pivot">Description<td>Defines the maximum chunk size<tr><td class="pivot">Synopsis<td>LimitChunk size<tr><td class="pivot">Context<td>Default server, VirtualHost<tr><td class="pivot">Example<td>LimitChunk 8192<tr><td class="pivot">Notes<td><p>This directive defines the maximum chunk size when using Transfer Chunk Encoding.</p></table><a id="limitClients"></a><h2>LimitClients</h2><table class="directive" title="directive"><tbody><tr><td class="pivot">Description<td>Sets the maximum number of simultaneous client systems<tr><td class="pivot">Synopsis<td>LimitClients count<tr><td class="pivot">Context<td>Default server, VirtualHost<tr><td class="pivot">Example<td>LimitClients 10<tr><td class="pivot">Notes<td><p>The LimitClients directive defines the maximum number of simultaneous client systems that can connect to the server. Connections in excess of this count will be rejected. A limit of '0' means unlimited.</p><p>This directive counts the number of unique client systems. A system with many users all using the same IP address will be counted as one client.</p></table><a id="limitConnections"></a><h2>LimitConnections</h2><table class="directive" title="directive"><tbody><tr><td class="pivot">Description<td>Sets the maximum number of simultaneous client endpoint connections<tr><td class="pivot">Synopsis<td>LimitConnections count<tr><td class="pivot">Context<td>Default server, VirtualHost<tr><td class="pivot">Example<td>LimitConnections 50<tr><td class="pivot">Notes<td><p>The LimitConnections directive defines the maximum number of simultaneous client connections to the server. Connections in excess of this count will be rejected. A limit of '0' means unlimited.</p><p>This directive counts the number of client socket connections. A single browser may open many separate connections (typically up to 6).</p></table><a id="limitFiles"></a><h2>LimitFiles</h2><table class="directive" title="directive"><tbody><tr><td class="pivot">Description<td>Sets the maximum number of open files/sockets that Appweb can open.<tr><td class="pivot">Synopsis<td>LimitFiles count<tr><td class="pivot">Context<td>Default server<tr><td class="pivot">Example<td>LimitFiles 1024<tr><td class="pivot">Notes<td><p>The LimitFiles directive defines the maximum number of files/sockets that Appweb can open on a Unix system. The files limit must be set sufficiently high to support the peak load anticipated for Appweb. Each request will always consume one file descriptor for the network socket. CGI requests will consume an additional three file descriptors to communicate with the CGI process.</p><p>The default limit for Appweb is defined by the system ulimit. A limit of '0' means set the limit to the maximum permitted by the operating system.</p></table><a id="limitKeepAlive"></a><h2>LimitKeepAlive</h2><table class="directive" title="directive"><tbody><tr><td class="pivot">Description<td>Define the maximum number of requests for a connection.<tr><td class="pivot">Synopsis<td>LimitKeepAlive number<tr><td class="pivot">Context<td>Default Server, Virtual Host, Route<tr><td class="pivot">Example<td>LimitKeepAlive 50<tr><td class="pivot">Notes<td><p>This directive defines the maximum number of requests that may be serviced using a single TCP/IP connection.</p><tr><td class="security">Security<td><p>Limiting the number to a reasonable maximum can help reduce the impact of some denial of service attacks.</p></table><a id="limitMemory"></a><h2>LimitMemory</h2><table class="directive" title="directive"><tbody><tr><td class="pivot">Description<td>Sets the maximum heap memory that Appweb can allocate.<tr><td class="pivot">Synopsis<td>LimitMemory size<tr><td class="pivot">Context<td>Default server<tr><td class="pivot">Example<td>LimitSize 10MB<tr><td class="pivot">Notes<td><p>The LimitMemory directive defines the maximum amount of memory that Appweb can use. On Linux and MacOSX, where a fast memory size API exists, this is the amount of memory currently used by the application. On other platforms, it is the amount of Appweb heap memory and does not include thread stack, code allocations, or memory allocated by means other than the MPR memory allocation primitives. If the memory limit is exceeded, Appweb will invoke the policy specified by the MemoryPolicy directive.</p></table><a id="limitProcesses"></a><h2>LimitProcesses</h2><table class="directive" title="directive"><tbody><tr><td class="pivot">Description<td>Sets the maximum number of processes Appweb will spawn for CGI.<tr><td class="pivot">Synopsis<td>LimitProcesses count<tr><td class="pivot">Context<td>Default server<tr><td class="pivot">Example<td>LimitProcesses 1000000<tr><td class="pivot">Notes<td><p>The LimitProcesses directive defines the maximum number of processes that Appweb will spawn to serve CGI processes. If this maximum is exceeded, Appweb will deny the request.</p></table><a id="limitRequestsPerClient"></a><h2>LimitRequestsPerClient</h2><table class="directive" title="directive"><tbody><tr><td class="pivot">Description<td>Sets the maximum number of simultaneous HTTP requests for a single client IP address<tr><td class="pivot">Synopsis<td>LimitRequestsPerClient count<tr><td class="pivot">Context<td>Default server, VirtualHost, Route<tr><td class="pivot">Example<td>LimitRequestsPerClient 20<tr><td class="pivot">Notes<td><p>The LimitRequestsPerClient directive defines the maximum number of simultaneous client HTTP requests that are permitted per single client IP address. Requests in excess of this count will be rejected. A limit of '0' means unlimited.</p><p>NOTE: that many browsers can and will initiate multiple requests when requesting a page. Some browsers will initiate up to six requests at a time for a single tab.</p><tr><td class="security">Security<td><p>To mitigate denial of service attacks, this limit should be set as low as possible.</p></table><a id="limitRequestBody"></a><h2>LimitRequestBody</h2><table class="directive" title="directive"><tbody><tr><td class="pivot">Description<td>Sets the maximum size of the request body from the client.<tr><td class="pivot">Synopsis<td>LimitRequestBody limit<tr><td class="pivot">Context<td>Default server, VirtualHost<tr><td class="pivot">Example<td>LimitRequestBody 65536<tr><td class="pivot">Notes<td><p>The LimitRequestBody directive defines a maximum size for the request body. For embedded applications, it is useful to limit the request body to the expected maximum. This ensures that rogue or malicious requests will not cause the server to allocate unwanted memory to servicing the request.</p><p>The limit is an integer between zero and 2147483647 (2GB), where zero means unlimited. If a request is received that is larger than the limit, it will be rejected and the client will receive an error. The default limit is 64 MB.</p><tr><td class="security">Security<td><p>This directive can be quite useful in certain denial-of-service attacks where the attacker sends large documents of a certain type.</p></table><a id="limitRequestForm"></a><h2>LimitRequestForm</h2><table class="directive" title="directive"><tbody><tr><td class="pivot">Description<td>Sets the maximum size of the request form from the client.<tr><td class="pivot">Synopsis<td>LimitRequestForm limit<tr><td class="pivot">Context<td>Default server, VirtualHost<tr><td class="pivot">Example<td>LimitRequestForm 65536<tr><td class="pivot">Notes<td><p>The LimitRequestForm directive defines a maximum size for the request form data. Form data is encoded with a Content-Type of "application/x-www-form-urlencoded". Form data is fully buffered before doing Route matching and constructing the pipeline. Whereas, non-form data is streamed to the handler and not buffered.</p><p>For embedded applications, it is useful to limit the request body to the expected maximum. This ensures that rogue or malicious requests will not cause the server to allocate unwanted memory to servicing the request.</p><p>The limit is an integer between zero and 2147483647 (2GB), where zero means unlimited. If a request is received that is larger than the limit, it will be rejected and the client will receive an error. The default limit is 64 MB.</p><tr><td class="security">Security<td><p>This directive can be quite useful in certain denial-of-service attacks where the attacker sends large documents of a certain type.</p></table><a id="limitRequestHeader"></a><h2>LimitRequestHeader</h2><table class="directive" title="directive"><tbody><tr><td class="pivot">Description<td>Maximum size of the request headers from the client<tr><td class="pivot">Synopsis<td>LimitRequestHeader limit<tr><td class="pivot">Context<td>Default server, VirtualHost<tr><td class="pivot">Example<td>LimitRequestHeader 65536<tr><td class="pivot">Notes<td><p>The LimitRequestHeader directive defines the maximum size of the request header from the client. For embedded applications, it is useful to limit the size of the header to the expected maximum. This ensures that rogue or malicious requests will not cause the server to allocate unwanted memory to servicing the request. Typically, HTTP requests will not have more than 4K of header data.</p><p>The limit is an integer between zero and 1 MB, where zero means unlimited. If a request is received that has a header larger than the limit, it will be rejected and the client will receive an error. The default limit is 8 K.</p><tr><td class="security">Security<td><p>This directive can be quite useful in certain denial-of-service attacks where the attacker sends requests with large bogus headers.</p></table><a id="limitRequestHeaderLines"></a><h2>LimitRequestHeaderLines</h2><table class="directive" title="directive"><tbody><tr><td class="pivot">Description<td>Maximum number of header lines in the request body from the client.<tr><td class="pivot">Synopsis<td>LimitRequestHeaderLines limit<tr><td class="pivot">Context<td>Default server, VirtualHost<tr><td class="pivot">Example<td>LimitRequestHeaderLines 64<tr><td class="pivot">Notes<td><p>The LimitRequestHeaderLines directive defines a maximum number of header lines that may be in a request from a client. For embedded applications, it is useful to limit the number of header lines to the expected maximum. This ensures that rogue or malicious requests will not cause the server to allocate unwanted memory to servicing the request. Typically, HTTP requests will not have more than 15-20 header lines.</p><p>The limit is an integer between zero and 4096, where zero means unlimited. If a request is received that has more header lines than the limit, it will be rejected and the client will receive an error. The default limit is 40.</p><tr><td class="security">Security<td><p>This directive can be quite useful in certain denial-of-service attacks where the attacker sends requests with many spurious header lines.</p></table><a id="limitResponseBody"></a><h2>LimitResponseBody</h2><table class="directive" title="directive"><tbody><tr><td class="pivot">Description<td>Set the maximum size of the response body buffered by a dynamic Appweb handler.<tr><td class="pivot">Synopsis<td>LimitResponseBody number<tr><td class="pivot">Context<td>Default server, VirtualHost, Route<tr><td class="pivot">Example<td>LimitResponseBody 65536<tr><td class="pivot">Notes<td><p>The LimitResponseBody directive defines the maximum size for response body data.</p></table><a id="limitSessions"></a><h2>LimitSessions</h2><table class="directive" title="directive"><tbody><tr><td class="pivot">Description<td>Sets the maximum number of simultaneous client sessions<tr><td class="pivot">Synopsis<td>LimitSessions count<tr><td class="pivot">Context<td>Default server, VirtualHost, Route<tr><td class="pivot">Example<td>LimitSessions 40<tr><td class="pivot">Notes<td><p>The LimitSessions directive defines the maximum number of simultaneous client sessions that utilize server-side session state storage. Requests in excess of this count will be rejected. A limit of '0' means unlimited.</p><p>This directive limits the number of session states, whereas the LimitClients directive limits the number of connected client systems.</p><p>NOTE: that many browsers can and will initiate multiple requests when requesting a page. These will share the same session state storage. Some browsers will initiate up to six requests at a time for a single tab.</p></table><a id="limitUri"></a><h2>LimitUri</h2><table class="directive" title="directive"><tbody><tr><td class="pivot">Description<td>Maximum size of a URL in a request from a client.<tr><td class="pivot">Synopsis<td>LimitUri limit<tr><td class="pivot">Context<td>Default server, VirtualHost<tr><td class="pivot">Example<td>LimitUri 4096<tr><td class="pivot">Notes<td><p>The LimitUri directive defines the maximum size of a URL in Appweb. In embedded applications, it is useful to limit the number of header lines to the expected maximum. This ensures that rogue or malicious requests will not cause the server to allocate unwanted memory to servicing the request.</p><p>The limit is an integer between zero and 256 K where zero means unlimited. If a request is received that has a URL larger than the limit, it will be rejected and the client will receive an error. The default limit is 4 K.</p><tr><td class="security">Security<td><p>This directive can be quite useful in certain denial-of-service attacks where the attacker sends requests with bogus URLs.</p></table><a id="limitUpload"></a><h2>LimitUpload</h2><table class="directive" title="directive"><tbody><tr><td class="pivot">Description<td>Maximum size of a URL in a request from a client.<tr><td class="pivot">Synopsis<td>LimitUpload size<tr><td class="pivot">Context<td>Default server, VirtualHost<tr><td class="pivot">Example<td>LimitUpload 20MB<tr><td class="pivot">Notes<td><p>The LimitUpload directive defines the maximum size of an uploaded file. In embedded applications, it is useful to limit the maximum file upload size to ensure that rogue or malicious requests will not cause the server to allocate unwanted space for uploads.</p><p>If set to zero, there is no limit. If a file larger than the limit is uploaded, Appweb will reject the request and the client will receive an error. The default value is unlimited.</p><tr><td class="security">Security<td><p>This directive can be quite useful in certain denial-of-service attacks where the attacker sends requests with bogus URLs.</p></table><a id="memoryPolicy"></a><h2>Memory Policy</h2><table class="directive" title="directive"><tbody><tr><td class="pivot">Description<td>Defines the policy for memory depletion situations.<tr><td class="pivot">Synopsis<td>MemoryPolicy continue|restart<tr><td class="pivot">Context<td>Default server<tr><td class="pivot">Example<td>MemoryPolicy restart<tr><td class="pivot">Notes<td><p>Appweb manages memory proactively and ensures reliable operation by preventing memory allocation errors before they occur. It does this by defining a memory limit and applying a memory policy for how to react when memory is depleted.</p><p>The MemoryPolicy directive defines how Appweb will respond to low memory conditions. While the LimitMemory directive defines a maximum amount of memory that Appweb is permitted to use, the MemoryPolicy directive defines how Appweb will respond when the limit is approached and exceeded.</p><p>If memory utilization exceeds the maximum memory limit, Appweb will invoke the memory depletion policy defined by this directive. Appweb also institutes a memory redline that is 85% of the memory limit. When memory utilization exceeds the redline value, Appweb will issue a warning to the error log and attempt to free non-essential memory such as old session data and request caching.</p><p>If the memory policy is set to <em>continue</em>, Appweb will prune all non-essential memory, but will continue to run. i.e. the limit becomes a soft limit and can be exceeded. If the policy is set to <em>restart</em>, then Appweb will do a graceful restart if the maximum is exceeded. A graceful restart will allow existing requests to complete up to the timeout specified by the ExitTimeout directive. Appweb relies on the <em>appman</em> manager application to restart appweb in this case.</p></table><a id="minWorkers"></a><h2>MinWorkers</h2><table class="directive" title="directive"><tbody><tr><td class="pivot">Description<td>Number of worker threads to pre-allocate in the Appweb worker pool<tr><td class="pivot">Synopsis<td>MinWorkers number<tr><td class="pivot">Context<td>Default Server<tr><td class="pivot">Example<td>MinWorkers 100<tr><td class="pivot">Notes<td><p>The MinWorkers directive will pre-allocate the specified number of worker threads on startup and then ensure that the worker pool always has at least this minimum number of workers.</p><p>Appweb will automatically adjust the number of workers between the minimum specified by this directive and the maximum specified by the WorkerLimit directive or via the Appweb command line. Every ten minutes, Appweb will prune workers that have been idle for five minutes to reduce resource consumption.</p><p>Appweb 4 has two non-worker threads: one for the master event loop and one for the garbage collector. So the total number of Appweb threads will be two plus the number of active workers.</p></table><a id="threadStack"></a><h2>ThreadStack</h2><br><table class="directive" title="directive"><tbody><tr><td class="pivot">Description<td>Define the size of the stack to allocate for each thread<tr><td class="pivot">Synopsis<td>ThreadStack limit<tr><td class="pivot">Context<td>Default Server<tr><td class="pivot">Example<td>ThreadStack 64K<tr><td class="pivot">Notes<td><p>The ThreadStack directive defines the size of the thread stack to allocate for each thread. The limit is an integer between zero and an operating system defined maximum&nbsp; where zero means use the system default. The default limit is zero which implies the system default.</p></table><a id="limitWebSocketsMessage"></a><h2>LimitWebSocketsMessage</h2><table class="directive" title="directive"><tbody><tr><td class="pivot">Description<td>pool.<tr><td class="pivot">Synopsis<td>LimitWebSocketsMessage number<tr><td class="pivot">Context<td>Default Server, Virtual Host, Route<tr><td class="pivot">Example<td>LimitWebSocketsMessage 64K<tr><td class="pivot">Notes<td><p>The LimitWebSocketsMessage directive defines the maximum size of a Web Sockets message.</p></table><a id="limitWebSocketsPacket"></a><h2>WorkerLimit</h2><table class="directive" title="directive"><tbody><tr><td class="pivot">Description<td>Maximum size of a packet containing a portion of a Web Sockets message.<tr><td class="pivot">Synopsis<td>LimitWebSocketsPacket size<tr><td class="pivot">Context<td>Default Server, Virtual Host, Route<tr><td class="pivot">Example<td>LimitWebSocketsPacket 8K<tr><td class="pivot">Notes<td><p>This defines the maximum packet size for a portion of a Web Sockets message.</p></table><a id="limitWebSocketsFrame"></a><h2>LimitWebSocketsFrame</h2><table class="directive" title="directive"><tbody><tr><td class="pivot">Description<td>Maximum size of a Web Sockets message frame.<tr><td class="pivot">Synopsis<td>LimitWebSocketsFrame size<tr><td class="pivot">Context<td>Default Server, Virtual Server, Route<tr><td class="pivot">Example<td>LimitWebSocketsFrame 4K<tr><td class="pivot">Notes<td><p>This specifies the maximum frame size used for Web Sockets messages when sent over the wire.</p></table><a id="limitWorkers"></a><h2>LimitWorkers</h2><table class="directive" title="directive"><tbody><tr><td class="pivot">Description<td>Maximum number of worker threads to allocate for the Appweb worker pool.<tr><td class="pivot">Synopsis<td>LimitWorkers number<tr><td class="pivot">Context<td>Default Server<tr><td class="pivot">Example<td>LimitWorkers 8<tr><td class="pivot">Notes<td><p>The LimitWorkers directive defines a maximum number of threads for the Appweb thread pool. When running in multithreaded mode, Appweb will use a pool thread to service each request and then will return the thread to the pool. This results in a highly responsive and scalable architecture with excellent throughput characteristics. Each thread requires a thread stack and thus consumes memory. By limiting the number of threads, memory can be conserved.</p><p>If the maximum number of threads is also specified via the <a href=../../start/starting.html>Appweb command line</a>, the command line value will take precedence.</p><p>Appweb will automatically adjust the number of pool threads between the minimum specified by the MinWorkers directive and the maximum specified by this directive. Appweb will prune idle threads to reduce resource consumption as required.</p></table></div><div class="terms ui basic center aligned segment"><p>&copy; Embedthis Software, 2003-2015. All rights reserved.</p></div><script src="../../lib/jquery/jquery.min.js"></script><script src="../../lib/exp-reload/reload.js"></script><script src="../../lib/semantic-ui/semantic.js"></script>