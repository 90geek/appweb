<!DOCTYPE html>
<html lang="en">
<head>
    <title>Modules</title>
    <!-- Copyright Embedthis Software, LLC, 2003-2014. All Rights Reserved. -->
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta name="keywords" content="embedded web server, web server software, embedded HTTP, application web server,
        embedded server, small web server, HTTP server, library web server, library HTTP, HTTP library" />
    <meta name="description" content="Embedthis Sofware provides commercial and open source embedded web servers for
        devices and applications." />
    <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,+Sans:300italic,400,300,700'
        rel='stylesheet' type='text/css'>
    <link href="/lib/semantic/packaged/css/semantic.css" rel="stylesheet" type="text/css" />
    <link href="/css/all.css" rel="stylesheet" type="text/css" />
    <link href="/images/favicon.ico" rel="shortcut icon" />

</head>
<body>
        
    <div class="ui large left vertical inverted labeled overlay sidebar menu">
        <div class="item">
            <a href="../../../">
                <b>General</b>
            </a>
            <div class="menu">
                <a class="item" href="../../../index.html">Appweb Overview</a>
                <a class="item" href="../../../guide/appweb/features.html">Appweb Features</a>
                <a class="item" href="../../../product/releaseNotes.html">Release Notes</a>
                <a class="item" href="https://github.com/embedthis/appweb/releases">Change Log</a>
                <a class="item" href="https://github.com/embedthis/appweb/milestones">Roadmap</a>
                <a class="item" href="https://embedthis.com/download/appweb.html">Download</a> 
                <a class="item" href="../../../product/compatibility.html">Compatibility</a>
                <a class="item" href="../../../licenses/index.html">Licensing</a>
            </div>
        </div>
        <div class="item">
            <a href="../../../guide/appweb/users/gettingStarted.html">
                <b>Getting Started</b>
            </a>
            <div class="menu">
                <a class="item" href="../../../guide/appweb/users/quickStart.html">Quick Start</a>
                <a class="item" href="../../../product/install/index.html">Installation</a>
                <a class="item" href="../../../guide/appweb/users/faq.html">Appweb FAQ</a>
                <a class="item" href="../../../guide/appweb/users/starting.html">Starting and Stopping</a>
                <a class="item" href="../../../guide/appweb/users/service.html">Running as a Service</a>
            </div>
        </div>
        <div class="item">
            <a href="../../../guide/appweb/users/index.html"><b>Users Guide</b></a>
            <div class="menu">
                <a class="item" href="../../../guide/appweb/users/configuration.html">Configuring Appweb</a>
                <a class="item" href="../../../guide/appweb/users/configuration.html#directives">Configuration Directives</a>
                <a class="item" href="../../../guide/appweb/users/frameworks.html">Web Frameworks</a>
                <a class="item" href="../../../guide/appweb/users/modules.html">Using Loadable Modules</a>
                <a class="item" href="../../../guide/appweb/users/ports.html">Ports and Binding</a>
                <a class="item" href="../../../guide/appweb/users/routing.html">Routing Requests</a>
                <a class="item" href="../../../guide/appweb/users/stages.html">Request Pipeline</a>
                <a class="item" href="../../../guide/appweb/users/lang.html">Multi-Language Content</a>
                <a class="item" href="../../../guide/appweb/users/authentication.html">User Authorization</a>
                <a class="item" href="../../../guide/appweb/users/logFiles.html">Logging</a>
                <a class="item" href="../../../guide/appweb/users/caching.html">Caching</a>
                <a class="item" href="../../../guide/appweb/users/vhosts.html">Virtual Hosts</a>
                <a class="item" href="../../../guide/appweb/users/ssl.html">Secure Sockets (SSL)</a>
                <a class="item" href="../../../guide/appweb/users/client.html">Http Client</a>
                <a class="item" href="../../../guide/appweb/users/security.html">Security Considerations</a>
                <a class="item" href="../../../guide/appweb/users/monitor.html">Monitoring and Defending</a>
                <a class="item" href="../../../guide/appweb/users/uploading.html">File Upload</a>
                <a class="item" href="../../../guide/appweb/users/webSockets.html">WebSockets</a>
            </div>
        </div>
        <div class="item">
            <a href="../../../guide/appweb/programmers/index.html">Programmer Guide</a>
            <div class="menu">
                <a class="item" href="../../../guide/appweb/programmers/embedding.html">Embedding Appweb</a>
                <a class="item" href="../../../guide/appweb/programmers/modules.html">Creating Appweb Modules</a>
                <a class="item" href="../../../guide/appweb/programmers/handlers.html">Creating Appweb Handlers</a>
                <a class="item" href="../../../guide/appweb/programmers/stages.html">Creating Pipeline Stages</a>
                <a class="item" href="../../../guide/appweb/programmers/migrating.html">Migrating to Appweb 5</a>
                <a class="item" href="../../../guide/appweb/programmers/rom.html">Serving Pages from ROM</a>
                <a class="item" href="../../../guide/appweb/programmers/man.html">Man Pages</a>
            </div>
        </div>
        <div class="item">
            <a href="../../../ref/appweb/index.html">Reference Guide</a>
            <div class="menu">
                <a class="item" href="../../../ref/appweb/native.html">API Library</a>
                <a class="item" href="../../../ref/appweb/memory.html">Appweb Memory Allocation</a>
                <a class="item" href="../../../ref/appweb/multithread.html">Multithreaded Programming</a>
                <a class="item" href="../../../ref/appweb/architecture.html">Appweb Architecture</a>
                <a class="item" href="../../../guide/appweb/standards/http.html">HTTP References</a>
            </div>
        </div>
        <div class="item">
            <a href="../../../guide/appweb/source/index.html">Source Code</a>
            <div class="menu">
                <a class="item" href="../../../guide/appweb/source/building.html">Building Appweb from Source</a>
                <a class="item" href="../../../guide/appweb/source/porting.html">Porting to New Platforms</a>
            </div>
        </div>
        <div class="item">
            <a href="../../../product/project.html">Project Resources</a>
            <div class="menu">
                <a class="item" href="https://github.com/embedthis/appweb">Source Code Repository</a>
                <a class="item" href="https://github.com/embedthis/appweb/issues">Project Issue Database</a>
                <a class="item" href="https://embedthis.com/scripts/contributors.esp">Contributors Agreement</a>
            </div>
        </div>
        <div class="item">
            <b>Links</b>
            <div class="menu">
                <a class="item" href="http://goo.gl/dGRDl4">Official Appweb News (Google+)</a>
                <a class="item" href="http://groups.google.com/group/appweb">Appweb Community Support</a>
                <a class="item" href="https://embedthis.com/">Embedthis Web Site</a>
                <a class="item" href="https://embedthis.com/appweb/">Appweb Web Site</a>
                <a class="item" href="https://embedthis.com/blog/">Embedthis Blog</a>
                <a class="item" href="http://twitter.com/mobstream">Twitter</a>
            </div>
        </div>
    </div>

    <div class="ui inverted masthead">
                <div class="column">
            <div class="inverted secondary pointing ui menu">
                <div class="header left item">
                    <!-- <a href="/index.html"><img src="/images/embedthis.png"></a> -->
                    <a href="/index.html">Appweb Documentation</a>
                </div>
                <div class="right menu">
                    <div class="ui top right">
                        <a class="item active" href="../../..//index.html">Documentation</a>
                        <a class="item" href="https://embedthis.com/appweb/">Appweb</a>
                        <a class="item" href="https://github.com/embedthis/appweb">Repository</a>
                        <a class="item" href="http://groups.google.com/group/appweb">Support</a>
                    </div>
                </div>
            </div>
            <div class="ui breadcrumb">
                <a class="section" href="../../../">Home</a>
                
                <div class="divider">/</div>
                <a class="section " href="index.html">
                    Programmers Guide
                </a>
                
                <div class="divider">/</div>
                <a class="section active" href="modules.html">
                    Modules
                </a>
                
            </div>
        </div>
        <div class="ui black small launch right attached toggle button" style="width: 40px;">
            <i class="icon list layout">
                <span class="text" style="display: none;">Menu</span>
            </i>
        </div>

    </div>
    <div class="content">
<h1>Creating Appweb Modules</h1>
            <p>Appweb supports extension modules that can augment the capability of Appweb by adding new features,
            handlers, protocols or any arbitrary code.</p>
            <p>Appweb includes four loadable modules: CGI, ESP, PHP and SSL. The core appweb HTTP server includes
            some basic document serving functionality, but modules are used to extend the core with loadable web 
            frameworks and custom handlers.</p>
            <p>This document describes the Appweb Module Interface and how to create Appweb modules. The Appweb Module
            interface supports both dynamically loaded and statically linked modules from a single "C" code
            base.</p><a id="overview"></a>
            <h2>Overview</h2>
            <p>To create an Appweb module, you must create an initialization function that is called when Appweb loads
            your module. This must be named according to the form:</p>
            <pre class="ui code segment">
ma<b>Name</b>Init(Http *http, MprModule *module)
</pre>
            <p>where <b>Name</b> is the name of your module. For example: <em>maCgiHandlerInit</em> is the 
            library initialization entry point for the cgiHandler. 
            Note: The first letter must be upper case. This function will be
            called immediately after loading the module code.</p>
            <p>The init function is passed a reference to the Http service object and a module object for this module.</p>
<pre class="ui code segment">
int maSimpleModuleInit(Http *http, MprModule *mp)
{
    HttpStage   *handler;
    if ((handler = httpCreateHandler(http, "simpleHandler", 0, mp)) == 0) {
        return MPR_ERR_CANT_CREATE;
    }
    handler-&gt;open = openSimple; 
    handler-&gt;close = closeSimple; 
    handler-&gt;start = startSimple; 
    return 0;
}
</pre>
            <p>You can put any custom code in the initialization function. Often a module will create a request handler
            or request pipeline filter. If you call mprSetModuleFinalizer you can register a callback to run before
            the module is stopped or unloaded.
            <p>Modules can be loaded at startup in response to the <a href=
            "../users/dir/module.html#loadModule">LoadModule</a> Appweb configuration directive. You can also load
            modules at run-time via the <b>maLoadModule</b> "C" API.</p>
            <p>To package your module, you must create a DLL/shared library containing your module. On Windows,
            you also must export the initialization function. If you want to statically link your module, you need to ensure
            the main program explicitly calls your initialization function during its initialization.</p>
            <h2>More Info</h2>
            <p>See the <a
                href="https://github.com/embedthis/appweb/tree/master/samples/simple-module">samples/simple-module</a> 
                source code sample for a working module example.</p>
    </div>
    <div class="ui basic center aligned segment" id="terms">
        <p>&copy; Embedthis Software, 2003-2014. All rights reserved.
            Generated on Aug 14, 2014.
        </p>
    </div>

    <script src="/lib/jquery/jquery.js"></script>
    <script src="/lib/semantic/packaged/javascript/semantic.js"></script>
    <script>
        $('.sidebar').sidebar({overlay: false}).sidebar('toggle');
        $('.sidebar').first().sidebar('attach events', '.toggle.button');
    </script>
</body>
</html>
