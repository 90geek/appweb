<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>ESP - Native API Documentation</title>
<link href="api.css" rel="stylesheet" type="text/css" />
</head>
<body>

  <div class="contents">
<div>
<a href="#Components">Components</a> | <a href="#Typedefs">Typedefs</a> | <a href="#Functions">Functions</a> | <a href="#Defines">Defines</a>
</div>
<h1>ESP - Native API</h1>
<a name="Components"></a><h1>Components</h1>
  <table class="apiIndex" summary="Components">
<tr class="apiDef">
<td class="apiName"><a href="#group___esp_parse" class="nameRef">EspParse</a></td>
<td class="apiBrief">ESP page parser structure.</td></tr>
<tr class="apiDef">
<td class="apiName"><a href="#group___esp_req" class="nameRef">EspReq</a></td>
<td class="apiBrief">ESP request.</td></tr>
<tr class="apiDef">
<td class="apiName"><a href="#group___esp_route" class="nameRef">EspRoute</a></td>
<td class="apiBrief">EspRoute extended route configuration.</td></tr>
<tr class="apiDef">
<td class="apiName"><a href="#group___esp_session" class="nameRef">EspSession</a></td>
<td class="apiBrief">ESP session state object.</td></tr>
</table>
<a name="Functions"></a><h1>Functions</h1>
  <table class="apiIndex" summary="Functions">
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_req_1gaae88740666af5ee9b21ad39648857db8" class="nameRef">espAddHeader</a>(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *key, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *fmt, ...)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Add a header to the transmission using a format string.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_req_1gad772b64162b7f4eb80ef1a3a1795175d" class="nameRef">espAddHeaderString</a>(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *key, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *value)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Add a header to the transmission.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="#group___esp_session" class="ref">EspSession*</a></td><td><a href="#group___esp_session_1ga7d2c9558796acec2501b7d31dfc877b9" class="nameRef">espAllocSession</a>(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *id, <a href="appweb.html#http.html#mpr.html#group___mpr_time" class="ref">MprTime</a> lifespan)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Allocate a new session state object.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_req_1gaa50588be6fe69e04738fc0276d7afbbb" class="nameRef">espAppendHeader</a>(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *key, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *fmt, ...)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Append a transmission header.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_req_1gacb696dcdff91355fc9df37f5c7171a01" class="nameRef">espAppendHeaderString</a>(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *key, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *value)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Append a transmission header string.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_req_1gab6aeea9bb5cb500eabf3e1cfd1745f03" class="nameRef">espAutoFinalize</a>(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Auto finalize transmission of the http request.</td></tr>
<tr class="apiDef"><td class="apiType">char*</td><td><a href="#group___esp_route_1ga2fe633ebe5e6a9dd266e1da8863f55b0" class="nameRef">espBuildScript</a>(<a href="#group___esp_route" class="ref">EspRoute</a> *eroute, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *page, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *path, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *cacheName, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *layout, char **err)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Convert an ESP web page into compilable C code.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="appweb.html#http.html#mpr.html#mpr_8h_1a1062901a7428fdd9c7f180f5e01ea056" class="ref">bool</a></td><td><a href="#group___esp_route_1ga3b649e2be364263d078bb29ae3cbbb0a" class="nameRef">espCompile</a>(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *source, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *module, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *cacheName, int isView)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Compile a view or controller.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_route_1gaea173dc388d5badd02f2cd17743b479c" class="nameRef">espDefineAction</a>(<a href="#group___esp_route" class="ref">EspRoute</a> *eroute, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *targetKey, void *actionProc)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Define an action.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_route_1ga7cec7c28d284376b7670bf0065159870" class="nameRef">espDefineView</a>(<a href="#group___esp_route" class="ref">EspRoute</a> *eroute, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *path, void *viewProc)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Define a view.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_session_1gab325d1d70bce4551a89fd7f0d1208b07" class="nameRef">espDestroySession</a>(<a href="#group___esp_session" class="ref">EspSession</a> *sp)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Destroy a session state object.</td></tr>
<tr class="apiDef"><td class="apiType">char*</td><td><a href="#group___esp_route_1ga680226fbc5c0a870ff91eef7d13ac4c8" class="nameRef">espExpandCommand</a>(<a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *command, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *source, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *module)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Expand a compile or link command template.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_req_1gac142434246bc5558dfe73a78ded7a7f0" class="nameRef">espFinalize</a>(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Finalize transmission of the http request.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="appweb.html#http.html#mpr.html#mpr_8h_1a1062901a7428fdd9c7f180f5e01ea056" class="ref">bool</a></td><td><a href="#group___esp_req_1ga5a3491684933d6cb6fdf6774a7fbb083" class="nameRef">espFinalized</a>(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Test if a http request is finalized.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_req_1gadf50b51bf7ab10d828e85be140c005c5" class="nameRef">espFlush</a>(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Flush transmit data.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="appweb.html#http.html#mpr.html#mpr_8h_1aa6887458d0a070b3665166af590089d8" class="ref">MprOff</a></td><td><a href="#group___esp_req_1ga3cb308121f5659d48f58c217959c3800" class="nameRef">espGetContentLength</a>(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Get the receive body content length.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar*</a></td><td><a href="#group___esp_req_1ga1c47b7c05e41bc39b9f3426134c1bf7c" class="nameRef">espGetCookies</a>(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Get the request cookies.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="appweb.html#http.html#mpr.html#struct_mpr_hash_table" class="ref">MprHashTable*</a></td><td><a href="#group___esp_req_1gaf0b081478fe242608c9776e27491e02b" class="nameRef">espGetFormVars</a>(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Get the form vars table.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar*</a></td><td><a href="#group___esp_req_1gaddf870926cbeee2779b687522d5db0aa" class="nameRef">espGetHeader</a>(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *key)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Get an rx http header.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="appweb.html#http.html#mpr.html#struct_mpr_hash_table" class="ref">MprHashTable*</a></td><td><a href="#group___esp_req_1ga3f2366767ded6bb0f7e8fd86bb08bca7" class="nameRef">espGetHeaderHash</a>(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Get the hash table of rx Http headers.</td></tr>
<tr class="apiDef"><td class="apiType">char*</td><td><a href="#esp_8h_1a8b03cbaba01462fb4a7349c9d02fddf3" class="nameRef">espGetHeaders</a>(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Get all the requeset http headers.</td></tr>
<tr class="apiDef"><td class="apiType">int</td><td><a href="#group___esp_req_1gae5fc1c38d3117f0403050035ead3b33c" class="nameRef">espGetIntVar</a>(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *var, int defaultValue)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Get a form variable as an integer.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar*</a></td><td><a href="#group___esp_req_1gaf84aa1df39869744c4e0ac87e99f1a89" class="nameRef">espGetQueryString</a>(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Get the request query string.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="#group___esp_session" class="ref">EspSession*</a></td><td><a href="#group___esp_session_1ga4a615da785dba2c514e3237f37c92338" class="nameRef">espGetSession</a>(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, int create)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Get a session state object.</td></tr>
<tr class="apiDef"><td class="apiType">char*</td><td><a href="#group___esp_session_1ga74599c6792fca6d518dc85ea51fe12ab" class="nameRef">espGetSessionID</a>(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Get the session ID.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar*</a></td><td><a href="#group___esp_session_1ga60a5effb2a9ef53fdb02dbe865bf6093" class="nameRef">espGetSessionVar</a>(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *name, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *defaultValue)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Get a session state variable.</td></tr>
<tr class="apiDef"><td class="apiType">int</td><td><a href="#group___esp_req_1ga4323100f7ccf0a198b0ee2593749fe5e" class="nameRef">espGetStatus</a>(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Get the response status.</td></tr>
<tr class="apiDef"><td class="apiType">char*</td><td><a href="#group___esp_req_1gad4631deeb02544938b8590806ae8bb8e" class="nameRef">espGetStatusMessage</a>(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Get the Http response status message.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar*</a></td><td><a href="#group___esp_req_1gaa9052e93703bbd5cb13def655614ea43" class="nameRef">espGetVar</a>(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *var, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *defaultValue)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Get a form variable.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="appweb.html#http.html#mpr.html#mpr_8h_1a1062901a7428fdd9c7f180f5e01ea056" class="ref">bool</a></td><td><a href="#group___esp_req_1ga0dc5fb70fa9a677662eacf818293f993" class="nameRef">espMatchVar</a>(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *var, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *value)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Match a form variable with an expected value.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_req_1ga2b1dc5b4a688fc1062395d6420e85ef9" class="nameRef">espRedirect</a>(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, int status, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *target)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Redirect the client.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_req_1gaaf5114ed096b363628229ea0ae0f94c3" class="nameRef">espRedirectBack</a>(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Redirect the client back to the referrer.</td></tr>
<tr class="apiDef"><td class="apiType">int</td><td><a href="#group___esp_req_1ga8743524e4c8aff73135e0ad6f2d44d7c" class="nameRef">espRemoveHeader</a>(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *key)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Remove a header from the transmission.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="appweb.html#http.html#mpr.html#mpr_8h_1a1062901a7428fdd9c7f180f5e01ea056" class="ref">bool</a></td><td><a href="#group___esp_req_1ga54f5ce21966922b0883d1942ccbeae8d" class="nameRef">espSetAutoFinalizing</a>(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a1062901a7428fdd9c7f180f5e01ea056" class="ref">bool</a> on)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Enable auto-finalizing for this request.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_req_1gae9b3e3ddb3bf784d77cba59045dfeb81" class="nameRef">espSetContentLength</a>(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, <a href="appweb.html#http.html#mpr.html#mpr_8h_1aa6887458d0a070b3665166af590089d8" class="ref">MprOff</a> length)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Define a content length header in the transmission.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_req_1ga7bb7c062a2fb64c1756c93dc79481c2c" class="nameRef">espSetContentType</a>(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *mimeType)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Set the transmission (response) content mime type.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_req_1ga1e261501c2546b6b3b9ddf98a84b0646" class="nameRef">espSetCookie</a>(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *name, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *value, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *path, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *cookieDomain, <a href="appweb.html#http.html#mpr.html#group___mpr_time" class="ref">MprTime</a> lifespan, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a1062901a7428fdd9c7f180f5e01ea056" class="ref">bool</a> isSecure)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Set a cookie in the transmission.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_req_1ga66c536436b8a99612b1ce571c315b39b" class="nameRef">espSetHeader</a>(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *key, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *fmt, ...)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Set a transmission header.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_req_1gafcb200922fb98165c0485348ea640d01" class="nameRef">espSetHeaderString</a>(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *key, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *value)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Set a simple key/value transmission header.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_req_1ga1c582f2c263bbf97f0d85a781e26c2cc" class="nameRef">espSetIntVar</a>(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *var, int value)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Set an integer form variable value.</td></tr>
<tr class="apiDef"><td class="apiType">int</td><td><a href="#group___esp_session_1ga100b653cb5cb53f21805db558ffe609f" class="nameRef">espSetSessionVar</a>(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *name, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *value)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Set a session variable.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_req_1ga3151f73107b752661efecbacf9011894" class="nameRef">espSetStatus</a>(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, int status)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Set a Http response status.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_req_1ga900feca01971b8e0cd3ea1cc61a04315" class="nameRef">espSetVar</a>(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *var, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *value)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Set a form variable value.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_req_1ga4ed2f95cccb206fc9069c0a77c5c1e62" class="nameRef">espShowRequest</a>(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Show request details.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="appweb.html#http.html#mpr.html#mpr_8h_1a7d08ccc1e981eb4d5a238641ac4ccfc1" class="ref">ssize</a></td><td><a href="#group___esp_req_1gafb783e22dfaf983aec46f1718dcec201" class="nameRef">espWrite</a>(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *fmt, ...)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Write a formatted string.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="appweb.html#http.html#mpr.html#mpr_8h_1a7d08ccc1e981eb4d5a238641ac4ccfc1" class="ref">ssize</a></td><td><a href="#group___esp_req_1gad9edd910735ba5ee653419ff6af8540b" class="nameRef">espWriteBlock</a>(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *buf, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a7d08ccc1e981eb4d5a238641ac4ccfc1" class="ref">ssize</a> size)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Write a block of data to the client.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="appweb.html#http.html#mpr.html#mpr_8h_1a7d08ccc1e981eb4d5a238641ac4ccfc1" class="ref">ssize</a></td><td><a href="#group___esp_req_1ga265a6a50f12c3af1512aa4a30477665d" class="nameRef">espWriteString</a>(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *s)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Write a string of data to the client.</td></tr>
</table>
<a name="Typedefs"></a><h1>Typedefs</h1>
<table class="apiIndex" summary="typedefs">
<tr class="apiDef"><td class="apiName"><a href="#struct_esp" class="nameRef">Esp</a></td><td class="apiBrief">Top level ESP structure.</td></tr>
<tr class="apiDef"><td class="apiName"><a href="#struct_esp_action" class="nameRef">EspAction</a></td><td class="apiBrief">ESP Action.</td></tr>
<tr class="apiDef"><td class="apiName"><a href="#group___esp_req_1gab449f4bb41a5afc1af4870db06fa131f" class="nameRef">EspActionProc</a></td><td class="apiBrief">Action procedure callback.</td></tr>
<tr class="apiDef"><td class="apiName"><a href="#group___esp_req_1ga4645d40178e3548fd0e6ad13fec1b5ed" class="nameRef">EspViewProc</a></td><td class="apiBrief">View procedure callback.</td></tr>
</table>
<a name="Defines"></a><h1>Defines</h1>
<table class="apiIndex" summary="Defines">
<tr class="apiDef">
<td>#define</td><td><a href="#esp_8h_1a61427a6279173262d67b485f3e83a5d8" class="nameRef">ESP_LIFESPAN</a>&nbsp;&nbsp;&nbsp;(3600 * MPR_TICKS_PER_SEC)</td>
</tr>
<tr class="apiBrief"><td>&nbsp;</td><td>Default generated content cache lifespan.</td></tr>
<tr class="apiDef">
<td>#define</td><td><a href="#esp_8h_1a43fbeae907747e051a493bb33e63a4f4" class="nameRef">ESP_LISTEN</a>&nbsp;&nbsp;&nbsp;&quot;4000&quot;</td>
</tr>
<tr class="apiBrief"><td>&nbsp;</td><td>Default listening endpoint for the esp program.</td></tr>
<tr class="apiDef">
<td>#define</td><td><a href="#esp_8h_1aba24bbfd8deaacad96a6aa1aa88b4dd1" class="nameRef">ESP_TOK_INCR</a>&nbsp;&nbsp;&nbsp;1024</td>
</tr>
<tr class="apiBrief"><td>&nbsp;</td><td>Growth increment for ESP tokens.</td></tr>
<tr class="apiDef">
<td>#define</td><td><a href="#esp_8h_1aaa20b3ba42a13818a076cb243333f8dd" class="nameRef">ESP_UNLOAD_TIMEOUT</a>&nbsp;&nbsp;&nbsp;(30 * 1000)</td>
</tr>
<tr class="apiBrief"><td>&nbsp;</td><td>Timeout for ESP requests to complete when reloading modules.</td></tr>
  </table>
<h1>EspParse</h1>
<a name="group___esp_parse"></a>
<div class="api">
  <div class="prototype">EspParse</div>
  <div class="apiDetail">
<p>ESP page parser structure.</p>
    <dl><dt>See Also:</dt><dd>
    </dd></dl>
    <dl><dt>Fields:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param">char *</td><td><td>data</td><td>
Input data to parse.
</td>
    <tr><td class="param">int</td><td><td>lineNumber</td><td>
Line number for error reporting.
</td>
    <tr><td class="param">char *</td><td><td>next</td><td>
Next character in input.
</td>
    <tr><td class="param">MprBuf *</td><td><td>token</td><td>
Storage buffer for token.
</td>
    </table></dd></dl>
  </div>
</div>
<h1>EspReq</h1>
<a name="group___esp_req"></a>
<div class="api">
  <div class="prototype">EspReq</div>
  <div class="apiDetail">
<p>ESP request.</p>
    <dl><dt>See Also:</dt><dd>
    </dd></dl>
    <dl><dt>Fields:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param"><a class="ref" BBB href="#struct_esp_action">EspAction</a> *</td><td><td>action</td><td>
Action to invoke.
</td>
    <tr><td class="param">int</td><td><td>appLoaded</td><td>
App module already probed.
</td>
    <tr><td class="param">int</td><td><td>autoFinalize</td><td>
Request is/will-be auto-finalized.
</td>
    <tr><td class="param">MprBuf *</td><td><td>cacheBuffer</td><td>
HTML output caching.
</td>
    <tr><td class="param">char *</td><td><td>cacheName</td><td>
Base name of intermediate compiled file.
</td>
    <tr><td class="param">char *</td><td><td>commandLine</td><td>
Command line for compile/link.
</td>
    <tr><td class="param">char *</td><td><td>controllerName</td><td>
Controller name.
</td>
    <tr><td class="param">char *</td><td><td>controllerPath</td><td>
Path to controller source.
</td>
    <tr><td class="param">char *</td><td><td>entry</td><td>
Module entry point.
</td>
    <tr><td class="param">EspRoute *</td><td><td>eroute</td><td>
Extended route info.
</td>
    <tr><td class="param"><a class="ref" BBB href="#struct_esp">Esp</a> *</td><td><td>esp</td><td>
Convenient esp reference.
</td>
    <tr><td class="param">int</td><td><td>finalized</td><td>
Request has been finalized.
</td>
    <tr><td class="param">char *</td><td><td>module</td><td>
Name of compiled module.
</td>
    <tr><td class="param">HttpRoute *</td><td><td>route</td><td>
Route reference.
</td>
    <tr><td class="param">EspSession *</td><td><td>session</td><td>
Session data object.
</td>
    <tr><td class="param">int</td><td><td>sessionProbed</td><td>
Already probed for session store.
</td>
    <tr><td class="param">char *</td><td><td>source</td><td>
Name of ESP source.
</td>
    <tr><td class="param">char *</td><td><td>view</td><td>
Path to view.
</td>
    </table></dd></dl>
  </div>
</div>
<a name="group___esp_req_1gaae88740666af5ee9b21ad39648857db8"></a>
<div class="api">
  <div class="prototype">
    void
    espAddHeader
(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *key, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *fmt, ...)
  </div>
  <div class="apiDetail">
<p>Add a header to the transmission using a format string.</p>
    <dl><dt><b>Description</b>:</dt><dd>Add a header if it does not already exits.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param">conn</td><td>HttpConn connection object created via $httpCreateConn.</td>
    <tr><td class="param">key</td><td>Http response header key.</td>
    <tr><td class="param">fmt</td><td>Printf style formatted string to use as the header key value.</td>
    <tr><td class="param">...</td><td>Arguments for fmt.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>Zero if successful, otherwise a negative MPR error code. Returns MPR_ERR_ALREADY_EXISTS if the header already exists.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    </dd></dl>
  </div>
</div>
<a name="group___esp_req_1gad772b64162b7f4eb80ef1a3a1795175d"></a>
<div class="api">
  <div class="prototype">
    void
    espAddHeaderString
(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *key, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *value)
  </div>
  <div class="apiDetail">
<p>Add a header to the transmission.</p>
    <dl><dt><b>Description</b>:</dt><dd>Add a header if it does not already exits.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param">conn</td><td>HttpConn connection object created via $httpCreateConn.</td>
    <tr><td class="param">key</td><td>Http response header key.</td>
    <tr><td class="param">value</td><td>Value to set for the header.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>Zero if successful, otherwise a negative MPR error code. Returns MPR_ERR_ALREADY_EXISTS if the header already exists.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    </dd></dl>
  </div>
</div>
<a name="group___esp_req_1gaa50588be6fe69e04738fc0276d7afbbb"></a>
<div class="api">
  <div class="prototype">
    void
    espAppendHeader
(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *key, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *fmt, ...)
  </div>
  <div class="apiDetail">
<p>Append a transmission header.</p>
    <dl><dt><b>Description</b>:</dt><dd>Set the header if it does not already exists. Append with a &quot;, &quot; separator if the header already exists.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param">conn</td><td>HttpConn connection object created via $httpCreateConn.</td>
    <tr><td class="param">key</td><td>Http response header key.</td>
    <tr><td class="param">fmt</td><td>Printf style formatted string to use as the header key value.</td>
    <tr><td class="param">...</td><td>Arguments for fmt.</td>
    </table></dd></dl>
    <dl><dt>See Also:</dt><dd>
    </dd></dl>
  </div>
</div>
<a name="group___esp_req_1gacb696dcdff91355fc9df37f5c7171a01"></a>
<div class="api">
  <div class="prototype">
    void
    espAppendHeaderString
(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *key, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *value)
  </div>
  <div class="apiDetail">
<p>Append a transmission header string.</p>
    <dl><dt><b>Description</b>:</dt><dd>Set the header if it does not already exists. Append with a &quot;, &quot; separator if the header already exists.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param">conn</td><td>HttpConn connection object created via $httpCreateConn.</td>
    <tr><td class="param">key</td><td>Http response header key.</td>
    <tr><td class="param">value</td><td>Value to set for the header.</td>
    </table></dd></dl>
    <dl><dt>See Also:</dt><dd>
    </dd></dl>
  </div>
</div>
<a name="group___esp_req_1gab6aeea9bb5cb500eabf3e1cfd1745f03"></a>
<div class="api">
  <div class="prototype">
    void
    espAutoFinalize
(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn)
  </div>
  <div class="apiDetail">
<p>Auto finalize transmission of the http request.</p>
    <dl><dt><b>Description</b>:</dt><dd>If auto-finalization is enabled via <a class="ref" BBB href="#group___esp_req_1ga54f5ce21966922b0883d1942ccbeae8d">espSetAutoFinalizing</a>, this call will finalize writing Http response data by writing the final chunk trailer if required. If using chunked transfers, a null chunk trailer is required to signify the end of write data. If the request is already finalized, this call does nothing.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param">conn</td><td>HttpConn connection object.</td>
    </table></dd></dl>
    <dl><dt>See Also:</dt><dd>
    </dd></dl>
  </div>
</div>
<a name="group___esp_req_1gac142434246bc5558dfe73a78ded7a7f0"></a>
<div class="api">
  <div class="prototype">
    void
    espFinalize
(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn)
  </div>
  <div class="apiDetail">
<p>Finalize transmission of the http request.</p>
    <dl><dt><b>Description</b>:</dt><dd>Finalize writing Http data by writing the final chunk trailer if required. If using chunked transfers, a null chunk trailer is required to signify the end of write data. If the request is already finalized, this call does nothing.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param">conn</td><td>HttpConn connection object.</td>
    </table></dd></dl>
    <dl><dt>See Also:</dt><dd>
    </dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga5a3491684933d6cb6fdf6774a7fbb083"></a>
<div class="api">
  <div class="prototype">
    <a href="appweb.html#http.html#mpr.html#mpr_8h_1a1062901a7428fdd9c7f180f5e01ea056" class="ref">bool</a>
    espFinalized
(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn)
  </div>
  <div class="apiDetail">
<p>Test if a http request is finalized.</p>
    <dl><dt><b>Description</b>:</dt><dd>This tests if <a class="ref" BBB href="#group___esp_req_1gac142434246bc5558dfe73a78ded7a7f0">espFinalize</a> or <a class="ref" BBB href="#group___http_tx_1ga279ad49e5163402e2afd6caf478bcc70" external="http.dtags">httpFinalize</a> has been called for a request.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param">conn</td><td>HttpConn connection object.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>True if the request has been finalized.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    </dd></dl>
  </div>
</div>
<a name="group___esp_req_1gadf50b51bf7ab10d828e85be140c005c5"></a>
<div class="api">
  <div class="prototype">
    void
    espFlush
(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn)
  </div>
  <div class="apiDetail">
<p>Flush transmit data.</p>
This writes any buffered data
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param">conn</td><td>HttpConn connection object created via $httpCreateConn.</td>
    </table></dd></dl>
    <dl><dt>See Also:</dt><dd>
    </dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga3cb308121f5659d48f58c217959c3800"></a>
<div class="api">
  <div class="prototype">
    <a href="appweb.html#http.html#mpr.html#mpr_8h_1aa6887458d0a070b3665166af590089d8" class="ref">MprOff</a>
    espGetContentLength
(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn)
  </div>
  <div class="apiDetail">
<p>Get the receive body content length.</p>
    <dl><dt><b>Description</b>:</dt><dd>Get the length of the receive body content (if any). This is used in servers to get the length of posted data and in clients to get the response body length.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param">conn</td><td>HttpConn connection object created via $httpCreateConn.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>A count of the response content data in bytes.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    </dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga1c47b7c05e41bc39b9f3426134c1bf7c"></a>
<div class="api">
  <div class="prototype">
    <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *
    espGetCookies
(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn)
  </div>
  <div class="apiDetail">
<p>Get the request cookies.</p>
    <dl><dt><b>Description</b>:</dt><dd>Get the cookies defined in the current requeset.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param">conn</td><td>HttpConn connection object created via $httpCreateConn.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>Return a string containing the cookies sent in the Http header of the last request.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    </dd></dl>
  </div>
</div>
<a name="group___esp_req_1gaf0b081478fe242608c9776e27491e02b"></a>
<div class="api">
  <div class="prototype">
    <a href="appweb.html#http.html#mpr.html#struct_mpr_hash_table" class="ref">MprHashTable</a> *
    espGetFormVars
(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn)
  </div>
  <div class="apiDetail">
<p>Get the form vars table.</p>
    <dl><dt><b>Description</b>:</dt><dd>This call gets the form var table for the current request. Query data and www-url encoded form data is entered into the table after decoding. Use <a class="ref" BBB href="#group___mpr_hash_1ga68faa8c7289ae1180afdf994f0164a22" external="mpr.dtags">mprLookupKey</a> to retrieve data from the table.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param">conn</td><td>HttpConn connection object.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd><a class="ref" BBB href="#struct_mpr_hash_table" external="mpr.dtags">MprHashTable</a> instance containing the form vars.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    </dd></dl>
  </div>
</div>
<a name="group___esp_req_1gaddf870926cbeee2779b687522d5db0aa"></a>
<div class="api">
  <div class="prototype">
    <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *
    espGetHeader
(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *key)
  </div>
  <div class="apiDetail">
<p>Get an rx http header.</p>
    <dl><dt><b>Description</b>:</dt><dd>Get a http response header for a given header key.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param">conn</td><td>HttpConn connection object created via $httpCreateConn.</td>
    <tr><td class="param">key</td><td>Name of the header to retrieve. This should be a lower case header name. For example: &quot;Connection&quot;.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>Value associated with the header key or null if the key did not exist in the response.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    </dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga3f2366767ded6bb0f7e8fd86bb08bca7"></a>
<div class="api">
  <div class="prototype">
    <a href="appweb.html#http.html#mpr.html#struct_mpr_hash_table" class="ref">MprHashTable</a> *
    espGetHeaderHash
(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn)
  </div>
  <div class="apiDetail">
<p>Get the hash table of rx Http headers.</p>
    <dl><dt><b>Description</b>:</dt><dd>Get the internal hash table of rx headers.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param">conn</td><td>HttpConn connection object created via $httpCreateConn.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>Hash table. See MprHash for how to access the hash table.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    </dd></dl>
  </div>
</div>
<a name="group___esp_req_1gae5fc1c38d3117f0403050035ead3b33c"></a>
<div class="api">
  <div class="prototype">
    int
    espGetIntVar
(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *var, int defaultValue)
  </div>
  <div class="apiDetail">
<p>Get a form variable as an integer.</p>
    <dl><dt><b>Description</b>:</dt><dd>Get the value of a named form variable as an integer. Form variables are define via www-urlencoded query or post data contained in the request.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param">conn</td><td>HttpConn connection object.</td>
    <tr><td class="param">var</td><td>Name of the form variable to retrieve.</td>
    <tr><td class="param">defaultValue</td><td>Default value to return if the variable is not defined. Can be null.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>Integer containing the form variable&apos;s value.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    </dd></dl>
  </div>
</div>
<a name="group___esp_req_1gaf84aa1df39869744c4e0ac87e99f1a89"></a>
<div class="api">
  <div class="prototype">
    <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *
    espGetQueryString
(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn)
  </div>
  <div class="apiDetail">
<p>Get the request query string.</p>
    <dl><dt><b>Description</b>:</dt><dd>Get query string sent with the current request.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param">conn</td><td>HttpConn connection object.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>String containing the request query string. Caller should not free.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    </dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga4323100f7ccf0a198b0ee2593749fe5e"></a>
<div class="api">
  <div class="prototype">
    int
    espGetStatus
(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn)
  </div>
  <div class="apiDetail">
<p>Get the response status.</p>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param">conn</td><td>HttpConn connection object created via $httpCreateConn.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>An integer Http response code. Typically 200 is success.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    </dd></dl>
  </div>
</div>
<a name="group___esp_req_1gad4631deeb02544938b8590806ae8bb8e"></a>
<div class="api">
  <div class="prototype">
    char *
    espGetStatusMessage
(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn)
  </div>
  <div class="apiDetail">
<p>Get the Http response status message.</p>
The Http status message is supplied on the first line of the Http response
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param">conn</td><td>HttpConn connection object created via $httpCreateConn.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>A Http status message.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    </dd></dl>
  </div>
</div>
<a name="group___esp_req_1gaa9052e93703bbd5cb13def655614ea43"></a>
<div class="api">
  <div class="prototype">
    <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *
    espGetVar
(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *var, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *defaultValue)
  </div>
  <div class="apiDetail">
<p>Get a form variable.</p>
    <dl><dt><b>Description</b>:</dt><dd>Get the value of a named form variable. Form variables are define via www-urlencoded query or post data contained in the request.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param">conn</td><td>HttpConn connection object.</td>
    <tr><td class="param">var</td><td>Name of the form variable to retrieve.</td>
    <tr><td class="param">defaultValue</td><td>Default value to return if the variable is not defined. Can be null.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>String containing the form variable&apos;s value. Caller should not free.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    </dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga0dc5fb70fa9a677662eacf818293f993"></a>
<div class="api">
  <div class="prototype">
    <a href="appweb.html#http.html#mpr.html#mpr_8h_1a1062901a7428fdd9c7f180f5e01ea056" class="ref">bool</a>
    espMatchVar
(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *var, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *value)
  </div>
  <div class="apiDetail">
<p>Match a form variable with an expected value.</p>
    <dl><dt><b>Description</b>:</dt><dd>Compare a form variable and return true if it exists and its value matches.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param">conn</td><td>HttpConn connection object.</td>
    <tr><td class="param">var</td><td>Name of the form variable.</td>
    <tr><td class="param">value</td><td>Expected value to match.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>True if the value matches.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    </dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga2b1dc5b4a688fc1062395d6420e85ef9"></a>
<div class="api">
  <div class="prototype">
    void
    espRedirect
(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, int status, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *target)
  </div>
  <div class="apiDetail">
<p>Redirect the client.</p>
    <dl><dt><b>Description</b>:</dt><dd>Redirect the client to a new uri.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param">conn</td><td>HttpConn connection object created via $httpCreateConn.</td>
    <tr><td class="param">status</td><td>Http status code to send with the response.</td>
    <tr><td class="param">target</td><td>New target uri for the client.</td>
    </table></dd></dl>
    <dl><dt>See Also:</dt><dd>
    </dd></dl>
  </div>
</div>
<a name="group___esp_req_1gaaf5114ed096b363628229ea0ae0f94c3"></a>
<div class="api">
  <div class="prototype">
    void
    espRedirectBack
(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn)
  </div>
  <div class="apiDetail">
<p>Redirect the client back to the referrer.</p>
    <dl><dt><b>Description</b>:</dt><dd>Redirect the client to the referring URI.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param">conn</td><td>HttpConn connection object created via $httpCreateConn.</td>
    </table></dd></dl>
    <dl><dt>See Also:</dt><dd>
    </dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga8743524e4c8aff73135e0ad6f2d44d7c"></a>
<div class="api">
  <div class="prototype">
    int
    espRemoveHeader
(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *key)
  </div>
  <div class="apiDetail">
<p>Remove a header from the transmission.</p>
    <dl><dt><b>Description</b>:</dt><dd>Remove a header if present.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param">conn</td><td>HttpConn connection object created via $httpCreateConn.</td>
    <tr><td class="param">key</td><td>Http response header key.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>Zero if successful, otherwise a negative MPR error code.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    </dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga54f5ce21966922b0883d1942ccbeae8d"></a>
<div class="api">
  <div class="prototype">
    <a href="appweb.html#http.html#mpr.html#mpr_8h_1a1062901a7428fdd9c7f180f5e01ea056" class="ref">bool</a>
    espSetAutoFinalizing
(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a1062901a7428fdd9c7f180f5e01ea056" class="ref">bool</a> on)
  </div>
  <div class="apiDetail">
<p>Enable auto-finalizing for this request.</p>
    <dl><dt><b>Description</b>:</dt><dd>Remove a header if present.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param">conn</td><td>HttpConn connection object created via $httpCreateConn.</td>
    <tr><td class="param">on</td><td>Set to true to enable auto-finalizing.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>True if auto-finalizing was enabled prior to this call.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    </dd></dl>
  </div>
</div>
<a name="group___esp_req_1gae9b3e3ddb3bf784d77cba59045dfeb81"></a>
<div class="api">
  <div class="prototype">
    void
    espSetContentLength
(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, <a href="appweb.html#http.html#mpr.html#mpr_8h_1aa6887458d0a070b3665166af590089d8" class="ref">MprOff</a> length)
  </div>
  <div class="apiDetail">
<p>Define a content length header in the transmission.</p>
This will define a &quot;Content-Length: NNN&quot; request header
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param">conn</td><td>HttpConn connection object created via $httpCreateConn.</td>
    <tr><td class="param">length</td><td>Numeric value for the content length header.</td>
    </table></dd></dl>
    <dl><dt>See Also:</dt><dd>
    </dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga7bb7c062a2fb64c1756c93dc79481c2c"></a>
<div class="api">
  <div class="prototype">
    void
    espSetContentType
(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *mimeType)
  </div>
  <div class="apiDetail">
<p>Set the transmission (response) content mime type.</p>
    <dl><dt><b>Description</b>:</dt><dd>Set the mime type Http header in the transmission.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param">conn</td><td>HttpConn connection object created via $httpCreateConn.</td>
    <tr><td class="param">mimeType</td><td>Mime type string.</td>
    </table></dd></dl>
    <dl><dt>See Also:</dt><dd>
    </dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga1e261501c2546b6b3b9ddf98a84b0646"></a>
<div class="api">
  <div class="prototype">
    void
    espSetCookie
(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *name, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *value, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *path, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *cookieDomain, <a href="appweb.html#http.html#mpr.html#group___mpr_time" class="ref">MprTime</a> lifespan, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a1062901a7428fdd9c7f180f5e01ea056" class="ref">bool</a> isSecure)
  </div>
  <div class="apiDetail">
<p>Set a cookie in the transmission.</p>
    <dl><dt><b>Description</b>:</dt><dd>Define a cookie to send in the transmission Http header.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param">conn</td><td>HttpConn connection object created via $httpCreateConn.</td>
    <tr><td class="param">name</td><td>Cookie name.</td>
    <tr><td class="param">value</td><td>Cookie value.</td>
    <tr><td class="param">path</td><td>URI path to which the cookie applies.</td>
    <tr><td class="param">cookieDomain</td><td>Domain in which the cookie applies. Must have 2-3 dots.</td>
    <tr><td class="param">lifespan</td><td>Duration for the cookie to persist in msec.</td>
    <tr><td class="param">isSecure</td><td>Set to true if the cookie only applies for SSL based connections.</td>
    </table></dd></dl>
    <dl><dt>See Also:</dt><dd>
    </dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga66c536436b8a99612b1ce571c315b39b"></a>
<div class="api">
  <div class="prototype">
    void
    espSetHeader
(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *key, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *fmt, ...)
  </div>
  <div class="apiDetail">
<p>Set a transmission header.</p>
    <dl><dt><b>Description</b>:</dt><dd>Set a Http header to send with the request. If the header already exists, it its value is overwritten.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param">conn</td><td>HttpConn connection object created via $httpCreateConn.</td>
    <tr><td class="param">key</td><td>Http response header key.</td>
    <tr><td class="param">fmt</td><td>Printf style formatted string to use as the header key value.</td>
    <tr><td class="param">...</td><td>Arguments for fmt.</td>
    </table></dd></dl>
    <dl><dt>See Also:</dt><dd>
    </dd></dl>
  </div>
</div>
<a name="group___esp_req_1gafcb200922fb98165c0485348ea640d01"></a>
<div class="api">
  <div class="prototype">
    void
    espSetHeaderString
(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *key, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *value)
  </div>
  <div class="apiDetail">
<p>Set a simple key/value transmission header.</p>
    <dl><dt><b>Description</b>:</dt><dd>Set a Http header to send with the request. If the header already exists, it its value is overwritten.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param">conn</td><td>HttpConn connection object created via $httpCreateConn.</td>
    <tr><td class="param">key</td><td>Http response header key.</td>
    <tr><td class="param">value</td><td>String value for the key.</td>
    </table></dd></dl>
    <dl><dt>See Also:</dt><dd>
    </dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga1c582f2c263bbf97f0d85a781e26c2cc"></a>
<div class="api">
  <div class="prototype">
    void
    espSetIntVar
(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *var, int value)
  </div>
  <div class="apiDetail">
<p>Set an integer form variable value.</p>
    <dl><dt><b>Description</b>:</dt><dd>Set the value of a named form variable to an integer value. Form variables are define via www-urlencoded query or post data contained in the request.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param">conn</td><td>HttpConn connection object.</td>
    <tr><td class="param">var</td><td>Name of the form variable to retrieve.</td>
    <tr><td class="param">value</td><td>Default value to return if the variable is not defined. Can be null.</td>
    </table></dd></dl>
    <dl><dt>See Also:</dt><dd>
    </dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga3151f73107b752661efecbacf9011894"></a>
<div class="api">
  <div class="prototype">
    void
    espSetStatus
(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, int status)
  </div>
  <div class="apiDetail">
<p>Set a Http response status.</p>
    <dl><dt><b>Description</b>:</dt><dd>Set the Http response status for the request. This defaults to 200 (OK).</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param">conn</td><td>HttpConn connection object created via $httpCreateConn.</td>
    <tr><td class="param">status</td><td>Http status code.</td>
    </table></dd></dl>
    <dl><dt>See Also:</dt><dd>
    </dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga900feca01971b8e0cd3ea1cc61a04315"></a>
<div class="api">
  <div class="prototype">
    void
    espSetVar
(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *var, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *value)
  </div>
  <div class="apiDetail">
<p>Set a form variable value.</p>
    <dl><dt><b>Description</b>:</dt><dd>Set the value of a named form variable to a string value. Form variables are define via www-urlencoded query or post data contained in the request.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param">conn</td><td>HttpConn connection object.</td>
    <tr><td class="param">var</td><td>Name of the form variable to retrieve.</td>
    <tr><td class="param">value</td><td>Default value to return if the variable is not defined. Can be null.</td>
    </table></dd></dl>
    <dl><dt>See Also:</dt><dd>
    </dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga4ed2f95cccb206fc9069c0a77c5c1e62"></a>
<div class="api">
  <div class="prototype">
    void
    espShowRequest
(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn)
  </div>
  <div class="apiDetail">
<p>Show request details.</p>
    <dl><dt><b>Description</b>:</dt><dd>This echos request details back to the client. This is useful as a debugging tool.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param">conn</td><td>HttpConn connection object.</td>
    </table></dd></dl>
    <dl><dt>See Also:</dt><dd>
    </dd></dl>
  </div>
</div>
<a name="group___esp_req_1gafb783e22dfaf983aec46f1718dcec201"></a>
<div class="api">
  <div class="prototype">
    <a href="appweb.html#http.html#mpr.html#mpr_8h_1a7d08ccc1e981eb4d5a238641ac4ccfc1" class="ref">ssize</a>
    espWrite
(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *fmt, ...)
  </div>
  <div class="apiDetail">
<p>Write a formatted string.</p>
    <dl><dt><b>Description</b>:</dt><dd>Write a formatted string of data into packets to the client. Data packets will be created as required to store the write data. This call may block waiting for data to drain to the client.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param">conn</td><td>HttpConn connection object.</td>
    <tr><td class="param">fmt</td><td>Printf style formatted string.</td>
    <tr><td class="param">...</td><td>Arguments for fmt.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>A count of the bytes actually written.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    </dd></dl>
  </div>
</div>
<a name="group___esp_req_1gad9edd910735ba5ee653419ff6af8540b"></a>
<div class="api">
  <div class="prototype">
    <a href="appweb.html#http.html#mpr.html#mpr_8h_1a7d08ccc1e981eb4d5a238641ac4ccfc1" class="ref">ssize</a>
    espWriteBlock
(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *buf, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a7d08ccc1e981eb4d5a238641ac4ccfc1" class="ref">ssize</a> size)
  </div>
  <div class="apiDetail">
<p>Write a block of data to the client.</p>
    <dl><dt><b>Description</b>:</dt><dd>Write a block of data to the client. Data packets will be created as required to store the write data.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param">conn</td><td>HttpConn connection object.</td>
    <tr><td class="param">buf</td><td>Buffer containing the write data.</td>
    <tr><td class="param">size</td><td>of the data in buf.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>A count of the bytes actually written.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    </dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga265a6a50f12c3af1512aa4a30477665d"></a>
<div class="api">
  <div class="prototype">
    <a href="appweb.html#http.html#mpr.html#mpr_8h_1a7d08ccc1e981eb4d5a238641ac4ccfc1" class="ref">ssize</a>
    espWriteString
(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *s)
  </div>
  <div class="apiDetail">
<p>Write a string of data to the client.</p>
    <dl><dt><b>Description</b>:</dt><dd>Write a string of data to the client. Data packets will be created as required to store the write data. This call may block waiting for data to drain to the client.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param">conn</td><td>HttpConn connection object.</td>
    <tr><td class="param">s</td><td>String containing the data to write.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>A count of the bytes actually written.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    </dd></dl>
  </div>
</div>
<h1>EspRoute</h1>
<a name="group___esp_route"></a>
<div class="api">
  <div class="prototype">EspRoute</div>
  <div class="apiDetail">
<p>EspRoute extended route configuration.</p>
    <dl><dt>See Also:</dt><dd>
    </dd></dl>
    <dl><dt>Fields:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param">char *</td><td><td>appModuleName</td><td>
App module name when compiled flat.
</td>
    <tr><td class="param">char *</td><td><td>appModulePath</td><td>
App module path when compiled flat.
</td>
    <tr><td class="param">char *</td><td><td>cacheDir</td><td>
Directory for cached compiled controllers and views.
</td>
    <tr><td class="param">char *</td><td><td>compile</td><td>
Compile template.
</td>
    <tr><td class="param">char *</td><td><td>controllersDir</td><td>
Directory for controllers.
</td>
    <tr><td class="param">char *</td><td><td>databasesDir</td><td>
Directory for databases.
</td>
    <tr><td class="param">char *</td><td><td>dir</td><td>
Base directory (alias for route-&gt;dir).
</td>
    <tr><td class="param">MprList *</td><td><td>env</td><td>
Environment for compiler.
</td>
    <tr><td class="param">int</td><td><td>keepSource</td><td>
Preserve generated source.
</td>
    <tr><td class="param">char *</td><td><td>layoutsDir</td><td>
Directory for layouts.
</td>
    <tr><td class="param">MprTime</td><td><td>lifespan</td><td>
Default cache lifespan.
</td>
    <tr><td class="param">char *</td><td><td>link</td><td>
Link template.
</td>
    <tr><td class="param">char *</td><td><td>modelsDir</td><td>
Directory for models.
</td>
    <tr><td class="param">char *</td><td><td>searchPath</td><td>
Search path to use when locating compiler / linker.
</td>
    <tr><td class="param">int</td><td><td>showErrors</td><td>
Send server errors back to client.
</td>
    <tr><td class="param">char *</td><td><td>staticDir</td><td>
Directory for static web content.
</td>
    <tr><td class="param">int</td><td><td>update</td><td>
Auto-update modified ESP source.
</td>
    <tr><td class="param">char *</td><td><td>viewsDir</td><td>
Directory for views.
</td>
    </table></dd></dl>
  </div>
</div>
<a name="group___esp_route_1ga2fe633ebe5e6a9dd266e1da8863f55b0"></a>
<div class="api">
  <div class="prototype">
    char *
    espBuildScript
(<a href="#group___esp_route" class="ref">EspRoute</a> *eroute, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *page, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *path, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *cacheName, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *layout, char **err)
  </div>
  <div class="apiDetail">
<p>Convert an ESP web page into compilable C code.</p>
    <dl><dt><b>Description</b>:</dt><dd>This parses an ESP web page into a equivalent C source view.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param">eroute</td><td>EspRoute object.</td>
    <tr><td class="param">page</td><td>ESP web page script.</td>
    <tr><td class="param">path</td><td>Pathname for the ESP web page. This is used to process include directives which are resolved relative to this path.</td>
    <tr><td class="param">cacheName</td><td>MD5 cache name. Not a full path.</td>
    <tr><td class="param">layout</td><td>Default layout page.</td>
    <tr><td class="param">err</td><td>Output parameter to hold any relevant error message.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>C language code string for the web page.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    </dd></dl>
  </div>
</div>
<a name="group___esp_route_1ga3b649e2be364263d078bb29ae3cbbb0a"></a>
<div class="api">
  <div class="prototype">
    <a href="appweb.html#http.html#mpr.html#mpr_8h_1a1062901a7428fdd9c7f180f5e01ea056" class="ref">bool</a>
    espCompile
(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *source, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *module, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *cacheName, int isView)
  </div>
  <div class="apiDetail">
<p>Compile a view or controller.</p>
    <dl><dt><b>Description</b>:</dt><dd>This compiles ESP controllers and views into loadable, cached modules.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param">conn</td><td>Http connection object.</td>
    <tr><td class="param">source</td><td>ESP source file name.</td>
    <tr><td class="param">module</td><td>Output module file name.</td>
    <tr><td class="param">cacheName</td><td>MD5 cache name. Not a full path.</td>
    <tr><td class="param">isView</td><td>Set to true if the source is a view.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>True if the compilation is successful. Errors are logged and sent back to the client if EspRoute.showErrors is true.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    </dd></dl>
  </div>
</div>
<a name="group___esp_route_1gaea173dc388d5badd02f2cd17743b479c"></a>
<div class="api">
  <div class="prototype">
    void
    espDefineAction
(<a href="#group___esp_route" class="ref">EspRoute</a> *eroute, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *targetKey, void *actionProc)
  </div>
  <div class="apiDetail">
<p>Define an action.</p>
    <dl><dt><b>Description</b>:</dt><dd>Actions are C procedures that are invoked when specific URIs are routed to the controller/action pair.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param">eroute</td><td>ESP route object.</td>
    <tr><td class="param">targetKey</td><td>Target key used to select the action in a HttpRoute target. This is typically a URI prefix.</td>
    <tr><td class="param">actionProc</td><td>EspActionProc callback procedure to invoke when the action is requested.</td>
    </table></dd></dl>
    <dl><dt>See Also:</dt><dd>
    </dd></dl>
  </div>
</div>
<a name="group___esp_route_1ga7cec7c28d284376b7670bf0065159870"></a>
<div class="api">
  <div class="prototype">
    void
    espDefineView
(<a href="#group___esp_route" class="ref">EspRoute</a> *eroute, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *path, void *viewProc)
  </div>
  <div class="apiDetail">
<p>Define a view.</p>
    <dl><dt><b>Description</b>:</dt><dd>Views are ESP web pages that are executed to return presentation data back to the client.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param">eroute</td><td>ESP route object.</td>
    <tr><td class="param">path</td><td>Path to the ESP view source code.</td>
    <tr><td class="param">viewProc</td><td>EspViewPrococ callback procedure to invoke when the view is requested.</td>
    </table></dd></dl>
    <dl><dt>See Also:</dt><dd>
    </dd></dl>
  </div>
</div>
<a name="group___esp_route_1ga680226fbc5c0a870ff91eef7d13ac4c8"></a>
<div class="api">
  <div class="prototype">
    char *
    espExpandCommand
(<a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *command, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *source, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *module)
  </div>
  <div class="apiDetail">
<p>Expand a compile or link command template.</p>
    <dl><dt><b>Description</b>:</dt><dd>This expands a command template and replaces &quot;${tokens}&quot; with their equivalent value. The supported tokens are: <ul><li>ARCH - Build architecture (i386, x86_64) </li><li>CC - Compiler pathame </li><li>DEBUG - Compiler debug options (-g, -Zi, -Od) </li><li>INC - Include directory (out/inc) </li><li>LIB - Library directory (out/lib, out/bin) </li><li>LIBS - Required libraries directory (mod_esp, libappweb) </li><li>OBJ - Name of compiled source (out/lib/view-MD5.o) </li><li>OUT - Output module (view_MD5.dylib) </li><li>SHLIB - Shared library extension (.lib, .so) </li><li>SHOBJ - Shared object extension (.dll, .so) </li><li>SRC - Path to source code for view or controller (already templated) </li><li>TMP - System temporary directory </li><li>WINSDK - Path to the Windows SDK </li><li>VS - Path to Visual Studio </li></ul></dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param">command</td><td>Http connection object.</td>
    <tr><td class="param">source</td><td>ESP web page soure pathname.</td>
    <tr><td class="param">module</td><td>Output module pathname.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>An expanded command line.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    </dd></dl>
  </div>
</div>
<h1>EspSession</h1>
<a name="group___esp_session"></a>
<div class="api">
  <div class="prototype">EspSession</div>
  <div class="apiDetail">
<p>ESP session state object.</p>
    <dl><dt>See Also:</dt><dd>
    </dd></dl>
    <dl><dt>Fields:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param">MprCache *</td><td><td>cache</td><td>
Cache store reference.
</td>
    <tr><td class="param">char *</td><td><td>id</td><td>
Session ID key.
</td>
    <tr><td class="param">MprTime</td><td><td>lifespan</td><td>
Session inactivity timeout (msecs).
</td>
    </table></dd></dl>
  </div>
</div>
<a name="group___esp_session_1ga7d2c9558796acec2501b7d31dfc877b9"></a>
<div class="api">
  <div class="prototype">
    <a href="#group___esp_session" class="ref">EspSession</a> *
    espAllocSession
(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *id, <a href="appweb.html#http.html#mpr.html#group___mpr_time" class="ref">MprTime</a> lifespan)
  </div>
  <div class="apiDetail">
<p>Allocate a new session state object.</p>
    <dl><dt><b>Description</b>:</dt><dd></dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param">conn</td><td>Http connection object.</td>
    <tr><td class="param">id</td><td>Unique session state ID.</td>
    <tr><td class="param">lifespan</td><td>Session lifespan in ticks.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>A session state object.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    </dd></dl>
  </div>
</div>
<a name="group___esp_session_1gab325d1d70bce4551a89fd7f0d1208b07"></a>
<div class="api">
  <div class="prototype">
    void
    espDestroySession
(<a href="#group___esp_session" class="ref">EspSession</a> *sp)
  </div>
  <div class="apiDetail">
<p>Destroy a session state object.</p>
    <dl><dt><b>Description</b>:</dt><dd></dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param">sp</td><td>Session state object allocated with <a class="ref" BBB href="#group___esp_session_1ga7d2c9558796acec2501b7d31dfc877b9">espAllocSession</a></td>
    </table></dd></dl>
    <dl><dt>See Also:</dt><dd>
    </dd></dl>
  </div>
</div>
<a name="group___esp_session_1ga4a615da785dba2c514e3237f37c92338"></a>
<div class="api">
  <div class="prototype">
    <a href="#group___esp_session" class="ref">EspSession</a> *
    espGetSession
(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, int create)
  </div>
  <div class="apiDetail">
<p>Get a session state object.</p>
    <dl><dt><b>Description</b>:</dt><dd></dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param">conn</td><td>Http connection object.</td>
    <tr><td class="param">create</td><td>Set to true to create a session state object if one does not already exist for this client.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>A session state object.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    </dd></dl>
  </div>
</div>
<a name="group___esp_session_1ga74599c6792fca6d518dc85ea51fe12ab"></a>
<div class="api">
  <div class="prototype">
    char *
    espGetSessionID
(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn)
  </div>
  <div class="apiDetail">
<p>Get the session ID.</p>
    <dl><dt><b>Description</b>:</dt><dd></dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param">conn</td><td>Http connection object.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>The session ID string.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    </dd></dl>
  </div>
</div>
<a name="group___esp_session_1ga60a5effb2a9ef53fdb02dbe865bf6093"></a>
<div class="api">
  <div class="prototype">
    <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *
    espGetSessionVar
(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *name, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *defaultValue)
  </div>
  <div class="apiDetail">
<p>Get a session state variable.</p>
    <dl><dt><b>Description</b>:</dt><dd></dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param">conn</td><td>Http connection object.</td>
    <tr><td class="param">name</td><td>Variable name to get.</td>
    <tr><td class="param">defaultValue</td><td>If the variable does not exist, return the defaultValue.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>The variable value or defaultValue if it does not exist.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    </dd></dl>
  </div>
</div>
<a name="group___esp_session_1ga100b653cb5cb53f21805db558ffe609f"></a>
<div class="api">
  <div class="prototype">
    int
    espSetSessionVar
(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *name, <a href="appweb.html#http.html#mpr.html#mpr_8h_1a0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *value)
  </div>
  <div class="apiDetail">
<p>Set a session variable.</p>
    <dl><dt><b>Description</b>:</dt><dd></dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param">conn</td><td>Http connection object.</td>
    <tr><td class="param">name</td><td>Variable name to set.</td>
    <tr><td class="param">value</td><td>Variable value to use.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>A session state object.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    </dd></dl>
  </div>
</div>
<h2>Functions</h2>
<a name="esp_8h_1a8b03cbaba01462fb4a7349c9d02fddf3"></a>
<div class="api">
  <div class="prototype">
    char *
    espGetHeaders
(<a href="appweb.html#http.html#group___http_conn" class="ref">HttpConn</a> *conn)
  </div>
  <div class="apiDetail">
<p>Get all the requeset http headers.</p>
    <dl><dt><b>Description</b>:</dt><dd>Get all the rx headers. The returned string formats all the headers in the form: key: value\nkey2: value2\n.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param">conn</td><td>HttpConn connection object created via $httpCreateConn.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>String containing all the headers. The caller must free this returned string.</dd></dl>
  </div>
</div>
<h2>Typedefs</h2>
<a name="group___esp_req_1gab449f4bb41a5afc1af4870db06fa131f"></a>
<div class="api">
  <div class="prototype">
    typedef void(* EspActionProc)(HttpConn *conn).
  </div>
  <div class="apiDetail">
<p>Action procedure callback.</p>
    <dl><dt>See Also:</dt><dd>
    </dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga4645d40178e3548fd0e6ad13fec1b5ed"></a>
<div class="api">
  <div class="prototype">
    typedef void(* EspViewProc)(HttpConn *conn).
  </div>
  <div class="apiDetail">
<p>View procedure callback.</p>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param">conn</td><td>Http connection object.</td>
    </table></dd></dl>
    <dl><dt>See Also:</dt><dd>
    </dd></dl>
  </div>
</div>
<a name="struct_esp"></a>
<div class="api">
  <div class="prototype">Esp</div>
  <div class="apiDetail">
<p>Top level ESP structure.</p>
    <dl><dt>Fields:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param"><a class="ref" BBB href="#struct_mpr_hash_table" external="mpr.dtags">MprHashTable</a> *</td><td><td>actions</td><td>
Table of actions.
</td>
    <tr><td class="param">MprCache *</td><td><td>cache</td><td>
Session and content cache.
</td>
    <tr><td class="param">int</td><td><td>inUse</td><td>
Active ESP request counter.
</td>
    <tr><td class="param"><a class="ref" BBB href="#struct_mpr_mutex" external="mpr.dtags">MprMutex</a> *</td><td><td>mutex</td><td>
Multithread lock.
</td>
    <tr><td class="param"><a class="ref" BBB href="#struct_mpr_hash_table" external="mpr.dtags">MprHashTable</a> *</td><td><td>views</td><td>
Table of views.
</td>
    </table></dd></dl>
  </div>
</div>
<a name="struct_esp_action"></a>
<div class="api">
  <div class="prototype">EspAction</div>
  <div class="apiDetail">
<p>ESP Action.</p>
    <dl><dt><b>Description</b>:</dt><dd>Actions are run after a request URI is routed to a controller.</dd></dl>
    <dl><dt>Fields:</dt><dd>
    <table class="parameters" summary="Parameters">
    <tr><td class="param"><a class="ref" BBB href="#group___esp_req_1gab449f4bb41a5afc1af4870db06fa131f">EspActionProc</a></td><td><td>actionProc</td><td>
Action procedure to run to respond to the request.
</td>
    <tr><td class="param">char *</td><td><td>cacheUri</td><td>
Per-URI caching details.
</td>
    <tr><td class="param">MprTime</td><td><td>lifespan</td><td>
Lifespan for cached action content.
</td>
    </table></dd></dl>
    <dl><dt>See Also:</dt><dd>
    </dd></dl>
  </div>
</div>
<div class="footnote">Generated on Mon Sep 05 2011 12:22:51 GMT-0700 (PDT)<br/>
  Copyright &copy; <a href="http://embedthis.com">Embedthis Software</a> 2011.
</div></div></body></html>
