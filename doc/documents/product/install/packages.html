{
    title:  "Supporting Packages",
    crumbs: [ { 'Installation': 'index.html' }, { '', ''} ],
}
            <h1>Installing Supporting Packages</h1>
            <p>Appweb leverages other packages such as OpenSSL for additional functionality. Appweb may be built for
            specific environments such as the small C library, uClibc.</p>
            <p>Sometimes, you may have a requirement to rebuild one of these packages to add or remove features. This
            document describes the build process that Embedthis uses to build these packages. <b>NOTE:</b> we cannot
            support the building of these 3rd party packages. That is your responsibility and the responsibility of the
            various groups and vendors who provide these packages.</p>
            <p>See the package specific notes for:</p>
            <ul>
                <li><a href="#matrixssl">MatrixSSL</a></li>
                <li><a href="#openssl">OpenSSL</a></li>
                <li><a href="#uclibc">uClibc</a></li>
            </ul>
            <h2 class="section">Patched Packages</h2>
            <p>Often minor changes are required to get a package to build cleanly with Appweb on some platforms.
            Embedthis archives the patched packages used with Appweb in a Git repository at <a href=
            "http://github.com/embedthis/packages">http://github.com/embedthis/packages</a>.</p>
            <p>Use the following to checkout a copy of the packages:</p>
            <pre>
git clone http://github.com/embedthis/packages
</pre>
            <p>There is a top level Makefile which will build all the packages and there are individual Makefiles for
            each package. <b>NOTE:</b> Embedthis provides these packages as a service. The Makefiles and packages
            themselves are not supported.</p><a id="matrixssl"></a>
            <h2 class="section">MatrixSSL</h2>
            <p><a href="http://www.peersec.com">PeerSec</a> provide the <a href=
            "http://www.matrixssl.org">MatrixSSL TLS/SSL</a> product which can be downloaded from <a href=
            "http://www.matrixssl.org">www.matrixssl.org</a>. Consult their instructions and build using the standard
            steps.</p>
            <p>Configure Appweb using the --with matrixssl switch</p>
            <pre>
./configure --with matrixssl    
</pre>
            <p>You may need to edit the build/packages/matrixssl configuration file to further modify the compiler and
            linker flags and search paths to match your configuration. You may need to define the base directory which
            can optionally be provided as a switch to the --with matrixssl switch.</p><a id="openssl"></a>
            <h2 class="section">OpenSSL</h2>
            <p>These instructions are suitable for building OpenSSL version 0.9.7d.</p>
            <ul>
                <li><a href="#openssllinux">OpenSSL 0.9.7d on Linux</a></li>
                <li><a href="#opensslwindows">OpenSSL 0.9.7d on Windows</a></li>
            </ul><a id="openssllinux"></a>
            <h3>Building OpenSSL 0.9.7d on Linux for X886</h3>
            <p>Use the following commands to build OpenSSL natively on Linux:</p>
            <pre>
./config
make
</pre>
            <p>To build single threaded, use the "--no-threads" option. If you wish to also build OpenSSL as shared
            libraries, use:</p>
            <pre>
make build-shared
</pre>
            <p>After you have built OpenSSL you must reference the OpenSSL installation directory in your Appweb
            configuration. You can set this via the <b>configure</b> command. You may need to define the base directory
            which can optionally be provided as a switch to the --with openssl switch.</p>
            <pre>
./configure --with openssl=../../openssl-0.9.7d
</pre>
            <p>You may need to edit the build/packages/openssl configuration file to further modify the compiler and
            linker flags and search paths to match your configuration.</p><a id="opensslwindows"></a>
            <h3>Building OpenSSL 0.9.7d on Windows for X886</h3>
            <p>The Windows OpenSSL build system uses Perl and nmake. The following commands will build the required
            shared libraries (DLLs) for Appweb to use OpenSSL.</p>
            <pre>
perl Configure VC-WIN32
cmd /c ms\\do_masm
rm -f libcrypto.lib libeay32.dll libssl.lib ssleay32.dll
rm -f out32dll/*.exe out32dll/*.dll out32dll/*.lib
rm -f tmp32dll/*
perl Configure VC-WIN32
cmd /c ms\\do_masm.bat
nmake -f ms/ntdll.mak
mv out32dll/libeay32.lib libcrypto.lib
mv out32dll/ssleay32.lib libssl.lib
mv out32dll/*.dll .
cp -r inc32/openssl include
</pre>
            <p>After you have built OpenSSL you must reference the OpenSSL installation directory in your Appweb
            configuration. You can set this via the <b>configure</b> command. You may need to define the base directory
            which can optionally be provided as a switch to the --with openssl switch.</p>
            <pre>
./configure --with openssl=../../openssl-0.9.7d
</pre>
            <p>You may need to edit the build/packages/openssl configuration file to further modify the compiler and
            linker flags and search paths to match your configuration.</p><a id="uclibc"></a>
            <h2 class="section">uClibc</h2>
            <p>To get the smallest executable possible, there are several alternatives to the standard libc library.
            One of the leading tiny libcs on Linux is uClibc. For general information go to: <a href=
            "http://www.uclibc.org">www.uclibc.org</a>.</p>
            <p>To link with uClibc, you must first create a compiler tool chain that will link Appweb with the uClibc
            library. This is not always an easy process. The easiest way appears to be to get one of the pre-built root
            file systems that contain the complete cross compiler and uClibc library. You then mount this file system,
            make it your root file system and copy the Appweb source into it and build it there.</p>
            <p>When you run the <b>configure</b> command, you will need to supply the Cross compiler settings. These
            are passed to <b>configure</b> via environment variables. For example, the following script configures
            Appweb to build using the arm-linux cross compiler (supporting uclibc) that is installed under
            /usr/local.</p>
            <pre>
DIR=/usr/local ; \<br />export CC=arm-linux-uclibc-gcc ; \<br />GCC_DIR=`$$CC -print-libgcc-file-name 2&gt;&amp;1 | sed -e 's/\/libgcc.a//'` ; \<br />AR=arm-linux-uclibc-ar \<br />LD=arm-linux-uclibc-ld \<br />RANLIB=arm-linux-uclibc-ranlib \<br />IFLAGS="-I$$DIR/arm-linux-uclibc/include -I$$GCC_DIR/include" \<br />LDFLAGS="-L$$GCC_DIR/lib -L$$DIR/arm-linux-uclibc/lib \<br />    -Wl,--dynamic-linker -Wl,$$DIR/i386-linux/lib/ld-uClibc.so.0" \<br />./configure
</pre>
            <p>See <a href="../../guide/appweb/source/building.html">Building Appweb from Source</a> for full details
            on all the available <b>configure</b> switches.</p><a id="uclinux"></a> 
