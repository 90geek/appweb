<!DOCTYPE html>
<html lang="en">
<head>
    <title>Ejscript</title>
    <!-- Copyright Embedthis Software, LLC, 2003-2014. All Rights Reserved. -->
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta name="keywords" content="appweb, embedded web server, embedded, devices, http server, internet of things, esp, goahead" />
    <meta name="description" content="The fastest little web server" />
    <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700|Open+Sans:300italic,400,300,700'
        rel='stylesheet' type='text/css'>
    <link href="../../../../lib/semantic/packaged/css/semantic.css" rel="stylesheet" type="text/css" />
    <link href="../../../../css/all.css" rel="stylesheet" type="text/css" />
    <link href="../../../../images/favicon.ico" rel="shortcut icon" />

</head>
<body>
        
    <div class="ui large left vertical inverted labeled overlay sidebar menu">
        <div class="item">
            <a href="../../../../">
                <b>General</b>
            </a>
            <div class="menu">
                <a class="item" href="../../../../index.html">Appweb Overview</a>
                <a class="item" href="../../../../guide/appweb/features.html">Appweb Features</a>
                <a class="item" href="https://embedthis.com/appweb/download.html">Download</a> 
                <a class="item" href="../../../../licensing/index.html">Licensing</a>
            </div>
        </div>
        <div class="item">
            <a href="../../../../guide/appweb/users/gettingStarted.html">
                <b>Getting Started</b>
            </a>
            <div class="menu">
                <a class="item" href="../../../../guide/appweb/users/quickStart.html">Quick Start</a>
                <a class="item" href="../../../../install/index.html">Installation</a>
                <a class="item" href="../../../../guide/appweb/users/starting.html">Starting and Stopping</a>
                <a class="item" href="../../../../guide/appweb/users/service.html">Running as a Service</a>
                <a class="item" href="../../../../install/releaseNotes.html">Release Notes</a>
            </div>
        </div>
        <div class="item">
            <a href="../../../../guide/appweb/users/index.html"><b>Users Guide</b></a>
            <div class="menu">
                <a class="item" href="../../../../guide/appweb/users/configuration.html">Configuring Appweb</a>
                <a class="item" href="../../../../guide/appweb/users/configuration.html#directives">Configuration Directives</a>
                <a class="item" href="../../../../guide/appweb/users/frameworks.html">Web Frameworks</a>
                <a class="item" href="../../../../guide/appweb/users/modules.html">Using Loadable Modules</a>
                <a class="item" href="../../../../guide/appweb/users/ports.html">Ports and Binding</a>
                <a class="item" href="../../../../guide/appweb/users/routing.html">Routing Requests</a>
                <a class="item" href="../../../../guide/appweb/users/stages.html">Request Pipeline</a>
                <a class="item" href="../../../../guide/appweb/users/lang.html">Multi-Language Content</a>
                <a class="item" href="../../../../guide/appweb/users/authentication.html">User Authorization</a>
                <a class="item" href="../../../../guide/appweb/users/logFiles.html">Logging</a>
                <a class="item" href="../../../../guide/appweb/users/caching.html">Caching</a>
                <a class="item" href="../../../../guide/appweb/users/vhosts.html">Virtual Hosts</a>
                <a class="item" href="../../../../guide/appweb/users/ssl.html">Secure Sockets (SSL)</a>
                <a class="item" href="../../../../guide/appweb/users/client.html">Http Client</a>
                <a class="item" href="../../../../guide/appweb/users/security.html">Security Considerations</a>
                <a class="item" href="../../../../guide/appweb/users/monitor.html">Monitoring and Defending</a>
                <a class="item" href="../../../../guide/appweb/users/uploading.html">File Upload</a>
                <a class="item" href="../../../../guide/appweb/users/webSockets.html">WebSockets</a>
            </div>
        </div>
        <div class="item">
            <a href="../../../../guide/appweb/developers/index.html">Programmer Guide</a>
            <div class="menu">
                <a class="item" href="../../../../guide/appweb/developers/source.html">Building from Source</a>
                <a class="item" href="../../../../guide/appweb/developers/embedding.html">Embedding Appweb</a>
                <a class="item" href="../../../../guide/appweb/developers/modules.html">Creating Appweb Modules</a>
                <a class="item" href="../../../../guide/appweb/developers/handlers.html">Creating Appweb Handlers</a>
                <a class="item" href="../../../../guide/appweb/developers/stages.html">Creating Pipeline Stages</a>
                <a class="item" href="../../../../guide/appweb/developers/migrating.html">Migrating to Appweb 5</a>
                <a class="item" href="../../../../guide/appweb/developers/rom.html">Serving Pages from ROM</a>
                <a class="item" href="../../../../guide/appweb/developers/man.html">Man Pages</a>
            </div>
        </div>
        <div class="item">
            <a href="../../../../ref/appweb/index.html">Reference Guide</a>
            <div class="menu">
                <a class="item" href="../../../../ref/appweb/compatibility.html">Compatibility</a>
                <a class="item" href="../../../../ref/appweb/native.html">Native APIs</a>
                <a class="item" href="../../../../ref/appweb/architecture.html">Appweb Architecture</a>
                <a class="item" href="../../../../ref/appweb/memory.html">Appweb Memory Allocation</a>
                <a class="item" href="../../../../ref/appweb/multithread.html">Multithreaded Programming</a>
                <a class="item" href="../../../../guide/appweb/standards/http.html">HTTP References</a>
            </div>
        </div>
        <div class="item">
            <a href="../../../../guide/appweb/developers/project.html">Project Resources</a>
            <div class="menu">
                <a class="item" href="http://goo.gl/dGRDl4">Official Appweb News</a>
                <a class="item" href="https://embedthis.com/appweb/">Appweb Web Site</a>
                <a class="item" href="https://github.com/embedthis/appweb">Source Code Repository</a>
                <a class="item" href="https://github.com/embedthis/appweb/issues">Project Issue Database</a>
                <a class="item" href="https://github.com/embedthis/appweb/releases">Change Log</a>
                <a class="item" href="https://github.com/embedthis/appweb/milestones">Roadmap</a>
                <a class="item" href="https://embedthis.com/developers/contributors.html">Contributors Agreement</a>
            </div>
        </div>
        <div class="item">
            <b>Links</b>
            <div class="menu">
                <a class="item" href="https://embedthis.com/">Embedthis Web Site</a>
                <a class="item" href="https://embedthis.com/blog/">Embedthis Blog</a>
                <a class="item" href="http://twitter.com/mobstream">Twitter</a>
            </div>
        </div>
    </div>

    <div class="ui inverted masthead">
                <div class="column">
            <div class="inverted secondary pointing ui menu">
                <div class="header left item">
                    <!-- <a href="/index.html"><img src="/images/embedthis.png"></a> -->
                    <a href="/index.html">Appweb Documentation</a>
                </div>
                <div class="right menu">
                    <div class="ui top right">
                        <a class="item" href="https://embedthis.com/appweb/">Appweb</a>
                        <a class="item" href="https://github.com/embedthis/appweb">Repository</a>
                        <a class="item" href="http://groups.google.com/group/appweb">Support</a>
                    </div>
                </div>
            </div>
            <div class="ui breadcrumb">
                <a class="section" href="../../../../">Home</a>
                
                <div class="divider">/</div>
                <a class="section " href="../index.html">
                    Users Guide
                </a>
                
                <div class="divider">/</div>
                <a class="section " href="../configuration.html">
                    Configuration
                </a>
                
                <div class="divider">/</div>
                <a class="section active" href="ejs.html">
                    Ejscript
                </a>
                
            </div>
        </div>
        <div class="ui black small launch right attached toggle button" style="width: 40px;">
            <i class="icon list layout">
                <span class="text" style="display: none;">Menu</span>
            </i>
        </div>

    </div>
    <div class="content">
<h1>Ejscript Directives</h1>
            <p>The Ejscript directives control the Ejscript Web Framework and configure Ejscript web
            applications.</p>
            
            <a id="ejsAlias"></a>
            <h2>EjsAlias</h2>
            <table class="directive" title="directive">
                <tbody>
                    <tr>
                        <td class="pivot">Description</td>
                        <td>Define an Ejscript web application</td>
                    </tr>
                    <tr>
                        <td class="pivot">Synopsis</td>
                        <td>EjsAlias UriPrefix [Directory] [Script] [Workers]</td>
                    </tr>
                    <tr>
                        <td class="pivot">Context</td>
                        <td>Default server, Virtual host, Route</td>
                    </tr>
                    <tr>
                        <td class="pivot">Example</td>
                        <td>EjsAlias /myapp/ &nbsp;/var/www/myapp/ start.es 10</td>
                    </tr>
                    <tr>
                        <td class="pivot">Notes</td>
                        <td>
                            <p>The EjsAlias directive defines an Ejscript application at the given directory which
                            will receive all requests that begin with specified URI prefix. This one-line directive 
                            is typically all you need to do to define an Ejscript application.</p>
                            <p>The UriPrefix argument is mandatory, all others are optional.
                            The Directory argument is used to define the ejs HttpServer home and documents properties that
                            describe the base directory for the ejs application and the static documents directory. 
                            This may be overridden by modifying the home and documents properties of the HttpServer instance.
                            <p>The Script argument specifies the application startup script.
                            If not startup script is specified, the following default script is used by default:</p>
                            <pre>require ejs.web
let server: HttpServer = new HttpServer
var router = new Router(Router.Top)
server.on("readable", function (event, request) {
    server.serve(request, router)
})
server.listen()
</pre>
                            <p>The Workers arguments directive specifies the maximum number of worker threads to use 
                            when serving requests for this ejs application. Worker threads are retained in a pool for 
                            rapid reuse once requests complete. Set to zero for single-threaded operation. Defaults to 
                            any previously defined worker limit via EjsWorkers or the number of Appweb threads set via 
                            Threads (defaults to 10).</p>
                            <p>It is convenient to define applications using this directive in a separate configuration
                            file for each application. If the application config file is stored under the Appweb
                            "conf/apps" directory, then Appweb will read it automatically when it starts. This makes it
                            very easy to install or remove applications by simply adding or removing an application
                            configuration file to or from this directory.</p>
                            <p>The EjsAlias directive does the following actions:</p>
                            <ul>
                                <li>Creates a new Route block for the URL prefix</li>
                                <li>Creates a new directory block if required for the directory</li>
                                <li>Creates an alias for the URL prefix to the directory</li>
                                <li>Defines the <b>ejs</b> handler as the handler for the URL prefix</li>
                            </ul>
                            <p>Note: use a trailing "/" on the prefix to prevent matching URIs that have the prefix
                            as part of the first (non-directory) portion of their URI.</p>.
                        </td>
                    </tr>
                </tbody>
            </table>
            <a id="ejsStartup"></a>
            <h2>EjsStartup</h2>
            <table class="directive" title="directive">
                <tbody>
                    <tr>
                        <td class="pivot">Description</td>
                        <td>Define the Ejscript startup script</td>
                    </tr>
                    <tr>
                        <td class="pivot">Synopsis</td>
                        <td>EjsScript filename</td>
                    </tr>
                    <tr>
                        <td class="pivot">Context</td>
                        <td>Default server, Virtual host, Route</td>
                    </tr>
                    <tr>
                        <td class="pivot">Example</td>
                        <td>EjsStartup start.es </td>
                    </tr>
                    <tr>
                        <td class="pivot">Notes</td>
                        <td>
                            <p>The EjsStartup directive specifies the script filename used to start the application.
                            <p>If the script filename is relative, it is found in the ejs application directory specified
                            by EjsAlias (or Alias). Virtual hosts and location blocks will inherit an outer EjsStartup
                            definition. If not startup script is specified, the following default script is used:</p>
                            <pre>require ejs.web
let server: HttpServer = new HttpServer
var router = new Router(Router.Top)
server.on("readable", function (event, request) {
    server.serve(request, router)
})
server.listen()
</pre>
                        </td>
                    </tr>
                </tbody>
            </table>
            <a id="ejsWorkers"></a>
            <h2>EjsWorkers</h2>
            <table class="directive" title="directive">
                <tbody>
                    <tr>
                        <td class="pivot">Description</td>
                        <td>Control if Ejscript automatically creates session objects</td>
                    </tr>
                    <tr>
                        <td class="pivot">Synopsis</td>
                        <td>EjsWorkers number</td>
                    </tr>
                    <tr>
                        <td class="pivot">Context</td>
                        <td>Default server, Virtual host, Route</td>
                    </tr>
                    <tr>
                        <td class="pivot">Example</td>
                        <td>EjsWorkers 10</td>
                    </tr>
                    <tr>
                        <td class="pivot">Notes</td>
                        <td>
                            <p>This directive specifies the maximum number of worker threads to use when serving
                            requests for the ejs handler. Worker threads are retained in a pool for rapid reuse once
                            requests complete. Set to zero for single-threaded operation. Defaults to the number
                            of Appweb threads set via the Threads directive (defaults to 10).</p>
                        </td>
                    </tr>
                </tbody>
            </table>
    </div>
    <div class="ui basic center aligned segment" id="terms">
        <p>&copy; Embedthis Software, 2003-2014. All rights reserved.
            Generated on Aug 21, 2014.
        </p>
    </div>

    <script src="../../../../lib/jquery/jquery.js"></script>
    <script src="../../../../lib/semantic/packaged/javascript/semantic.js"></script>
    <script>
        $('.sidebar').sidebar({overlay: false}).sidebar('toggle');
        $('.sidebar').first().sidebar('attach events', '.toggle.button');
    </script>
</body>
</html>
