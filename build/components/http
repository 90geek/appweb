#
#   Http
#
defineComponent() {
    local internal path iflags libpaths builtin libraries imports headers

    internal="src/deps/http"
    path="${1:-${internal}}"
    iflags=-I`probe --name http.h --dir --search "$path:$path/${internal}:$path/src/include" "http.h"`
    if [ "$path" != "${internal}" ] ; then
        libraries=`probe --name libhttp --search "$path:$path/out/lib" "libhttp" `
        if [ "$libraries" = "" ] ; then
            warnComponent http "Can't locate libhttp"
            return
        fi
    fi
    headers=`probe --name http.h --search "$path:$path/out/include" "http.h" `
    builtin=`[ $path = "$internal" ] && echo --builtin`
    libpaths="${libraries%/*}"
    libs="http"
    imports="$libraries $headers"

    if [ `eval echo \\$${KIND}_HAS_PAM` = 1 ] ; then
        libs="$libs pam"
        withlibs="$withlibs pam"
    fi
    configureComponent --libs "$libs" --withlibs "$withlibs" --libpaths "$libpaths" --iflags "$iflags" $builtin \
        --imports "$imports" http
}
